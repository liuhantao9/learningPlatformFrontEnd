{"ast":null,"code":"/*!\n * froala_editor v3.0.0-rc.1 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(require(\"froala-editor\")) : \"function\" == typeof define && define.amd ? define([\"froala-editor\"], t) : t(e.FroalaEditor);\n}(this, function (m) {\n  \"use strict\";\n\n  m = m && m.hasOwnProperty(\"default\") ? m[\"default\"] : m, Object.assign(m.DEFAULTS, {\n    dragInline: !0\n  }), m.PLUGINS.draggable = function (f) {\n    var g,\n        d = f.$;\n\n    function e(e) {\n      return !(!e.originalEvent || !e.originalEvent.target || e.originalEvent.target.nodeType !== Node.TEXT_NODE) || (e.target && \"A\" === e.target.tagName && 1 === e.target.childNodes.length && \"IMG\" === e.target.childNodes[0].tagName && (e.target = e.target.childNodes[0]), d(e.target).hasClass(\"fr-draggable\") ? (f.undo.canDo() || f.undo.saveStep(), f.opts.dragInline ? f.$el.attr(\"contenteditable\", !0) : f.$el.attr(\"contenteditable\", !1), f.opts.toolbarInline && f.toolbar.hide(), d(e.target).addClass(\"fr-dragging\"), f.browser.msie || f.browser.edge || f.selection.clear(), void e.originalEvent.dataTransfer.setData(\"text\", \"Froala\")) : (e.preventDefault(), !1));\n    }\n\n    function p(e) {\n      return !(e && (\"HTML\" === e.tagName || \"BODY\" === e.tagName || f.node.isElement(e)));\n    }\n\n    function v(e, t, r) {\n      if (f.opts.iframe) {\n        var n = f.helpers.getPX(f.$wp.find(\".fr-iframe\").css(\"padding-top\")),\n            a = f.helpers.getPX(f.$wp.find(\".fr-iframe\").css(\"padding-left\"));\n        e += f.$iframe.offset().top + n, t += f.$iframe.offset().left + a;\n      }\n\n      g.offset().top !== e && g.css(\"top\", e), g.offset().left !== t && g.css(\"left\", t), g.width() !== r && g.css(\"width\", r);\n    }\n\n    function t(e) {\n      e.originalEvent.dataTransfer.dropEffect = \"move\", f.opts.dragInline ? function () {\n        for (var e = null, t = 0; t < m.INSTANCES.length; t++) {\n          if ((e = m.INSTANCES[t].$el.find(\".fr-dragging\")).length) return e.get(0);\n        }\n      }() || !f.browser.msie && !f.browser.edge || e.preventDefault() : (e.preventDefault(), function (e) {\n        var t = f.doc.elementFromPoint(e.originalEvent.pageX - f.win.pageXOffset, e.originalEvent.pageY - f.win.pageYOffset);\n\n        if (!p(t)) {\n          for (var r = 0, n = t; !p(n) && n === t && 0 < e.originalEvent.pageY - f.win.pageYOffset - r;) {\n            r++, n = f.doc.elementFromPoint(e.originalEvent.pageX - f.win.pageXOffset, e.originalEvent.pageY - f.win.pageYOffset - r);\n          }\n\n          (!p(n) || g && 0 === f.$el.find(n).length && n !== g.get(0)) && (n = null);\n\n          for (var a = 0, o = t; !p(o) && o === t && e.originalEvent.pageY - f.win.pageYOffset + a < d(f.doc).height();) {\n            a++, o = f.doc.elementFromPoint(e.originalEvent.pageX - f.win.pageXOffset, e.originalEvent.pageY - f.win.pageYOffset + a);\n          }\n\n          (!p(o) || g && 0 === f.$el.find(o).length && o !== g.get(0)) && (o = null), t = null === o && n ? n : o && null === n ? o : o && n ? r < a ? n : o : null;\n        }\n\n        if (d(t).hasClass(\"fr-drag-helper\")) return;\n\n        if (t && !f.node.isBlock(t) && (t = f.node.blockParent(t)), t && 0 <= [\"TD\", \"TH\", \"TR\", \"THEAD\", \"TBODY\"].indexOf(t.tagName) && (t = d(t).parents(\"table\").get(0)), t && 0 <= [\"LI\"].indexOf(t.tagName) && (t = d(t).parents(\"UL, OL\").get(0)), t && !d(t).hasClass(\"fr-drag-helper\")) {\n          var i;\n          g || (m.$draggable_helper || (m.$draggable_helper = d(document.createElement(\"div\")).attr(\"class\", \"fr-drag-helper\")), g = m.$draggable_helper, f.events.on(\"shared.destroy\", function () {\n            g.html(\"\").removeData().remove(), g = null;\n          }, !0)), i = e.originalEvent.pageY < d(t).offset().top + d(t).outerHeight() / 2;\n          var l = d(t),\n              s = 0;\n          i || 0 !== l.next().length ? (i || (l = l.next()), \"before\" === g.data(\"fr-position\") && l.is(g.data(\"fr-tag\")) || (0 < l.prev().length && (s = parseFloat(l.prev().css(\"margin-bottom\")) || 0), s = Math.max(s, parseFloat(l.css(\"margin-top\")) || 0), v(l.offset().top - s / 2 - f.$box.offset().top, l.offset().left - f.win.pageXOffset - f.$box.offset().left, l.width()), g.data(\"fr-position\", \"before\"))) : \"after\" === g.data(\"fr-position\") && l.is(g.data(\"fr-tag\")) || (s = parseFloat(l.css(\"margin-bottom\")) || 0, v(l.offset().top + d(t).height() + s / 2 - f.$box.offset().top, l.offset().left - f.win.pageXOffset - f.$box.offset().left, l.width()), g.data(\"fr-position\", \"after\")), g.data(\"fr-tag\", l), g.addClass(\"fr-visible\"), f.$box.append(g);\n        } else g && 0 < f.$box.find(g).length && g.removeClass(\"fr-visible\");\n      }(e));\n    }\n\n    function r(e) {\n      e.originalEvent.dataTransfer.dropEffect = \"move\", f.opts.dragInline || e.preventDefault();\n    }\n\n    function n(e) {\n      f.$el.attr(\"contenteditable\", !0);\n      var t = f.$el.find(\".fr-dragging\");\n      g && g.hasClass(\"fr-visible\") && f.$box.find(g).length ? a(e) : t.length && (e.preventDefault(), e.stopPropagation()), g && f.$box.find(g).length && g.removeClass(\"fr-visible\"), t.removeClass(\"fr-dragging\");\n    }\n\n    function a(e) {\n      var t, r;\n      f.$el.attr(\"contenteditable\", !0);\n\n      for (var n = 0; n < m.INSTANCES.length; n++) {\n        if ((t = m.INSTANCES[n].$el.find(\".fr-dragging\")).length) {\n          r = m.INSTANCES[n];\n          break;\n        }\n      }\n\n      if (t.length) {\n        if (e.preventDefault(), e.stopPropagation(), g && g.hasClass(\"fr-visible\") && f.$box.find(g).length) g.data(\"fr-tag\")[g.data(\"fr-position\")]('<span class=\"fr-marker\"></span>'), g.removeClass(\"fr-visible\");else if (!1 === f.markers.insertAtPoint(e.originalEvent)) return !1;\n        if (t.removeClass(\"fr-dragging\"), !1 === (t = f.events.chainTrigger(\"element.beforeDrop\", t))) return !1;\n        var a = t;\n        if (t.parent().is(\"A\") && 1 === t.parent().get(0).childNodes.length && (a = t.parent()), f.core.isEmpty()) f.events.focus();else f.$el.find(\".fr-marker\").replaceWith(m.MARKERS), f.selection.restore();\n        if (r === f || f.undo.canDo() || f.undo.saveStep(), f.core.isEmpty()) f.$el.html(a);else {\n          var o = f.markers.insert();\n          0 === a.find(o).length ? d(o).replaceWith(a) : 0 === t.find(o).length && d(o).replaceWith(t), t.after(m.MARKERS), f.selection.restore();\n        }\n        return f.popups.hideAll(), f.selection.save(), f.$el.find(f.html.emptyBlockTagsQuery()).not(\"TD, TH, LI, .fr-inner\").not(f.opts.htmlAllowedEmptyTags.join(\",\")).remove(), f.html.wrap(), f.html.fillEmptyBlocks(), f.selection.restore(), f.undo.saveStep(), f.opts.iframe && f.size.syncIframe(), r !== f && (r.popups.hideAll(), r.$el.find(r.html.emptyBlockTagsQuery()).not(\"TD, TH, LI, .fr-inner\").remove(), r.html.wrap(), r.html.fillEmptyBlocks(), r.undo.saveStep(), r.events.trigger(\"element.dropped\"), r.opts.iframe && r.size.syncIframe()), f.events.trigger(\"element.dropped\", [a]), !1;\n      }\n\n      g && g.removeClass(\"fr-visible\"), f.undo.canDo() || f.undo.saveStep(), setTimeout(function () {\n        f.undo.saveStep();\n      }, 0);\n    }\n\n    function o(e) {\n      if (e && \"DIV\" === e.tagName && f.node.hasClass(e, \"fr-drag-helper\")) e.parentNode.removeChild(e);else if (e && e.nodeType === Node.ELEMENT_NODE) for (var t = e.querySelectorAll(\"div.fr-drag-helper\"), r = 0; r < t.length; r++) {\n        t[r].parentNode.removeChild(t[r]);\n      }\n    }\n\n    return {\n      _init: function _init() {\n        f.opts.enter === m.ENTER_BR && (f.opts.dragInline = !0), f.events.on(\"dragstart\", e, !0), f.events.on(\"dragover\", t, !0), f.events.on(\"dragenter\", r, !0), f.events.on(\"document.dragend\", n, !0), f.events.on(\"document.drop\", n, !0), f.events.on(\"drop\", a, !0), f.events.on(\"html.processGet\", o);\n      }\n    };\n  };\n});","map":null,"metadata":{},"sourceType":"script"}