{"ast":null,"code":"var _jsxFileName = \"/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/Signup.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"../axios/axios-blogs\";\nimport Modal from \"react-responsive-modal\";\nimport Spinner from \"./UI/Spinner/Spinner\";\nimport { connect } from \"react-redux\";\n\nclass Singup extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      passwordAgain: \"\",\n      emailError: \"\",\n      usernameError: \"\",\n      loading: false\n    };\n\n    this.handleChange = (e, type) => {\n      if (type === \"email\") {\n        this.setState({\n          emailError: \"\"\n        });\n      }\n\n      if (type === \"username\") {\n        this.setState({\n          usernameError: \"\"\n        });\n      }\n\n      this.setState({\n        [type]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        loading: true\n      });\n\n      if (this.state.password === this.state.passwordAgain) {\n        const _this$state = this.state,\n              username = _this$state.username,\n              email = _this$state.email,\n              password = _this$state.password;\n        const user = {\n          user: {\n            username: username,\n            email: email,\n            password: password\n          }\n        };\n        axios.post(\"/api/users/signup\", user, {\n          headers: \"\"\n        }).then(res => {\n          this.setState({\n            loading: false,\n            username: \"\",\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\"\n          });\n          this.props.onSwitchModal();\n          this.props.getWarning(\"A verification email has been sent to your email account, you cannot post before verification\");\n          const data = res.data;\n          console.log(res);\n          this.props.handleLogIn(data.username, data.id);\n          localStorage.setItem(\"token\", data.token);\n        }).catch(err => {\n          if (err.response) {\n            this.setState({\n              emailError: err.response.data.email,\n              usernameError: err.response.data.username\n            });\n          }\n\n          this.setState({\n            loading: false\n          });\n        });\n      }\n    };\n\n    this.emailDuplicateError = () => {\n      if (this.state.emailError) {\n        return React.createElement(\"p\", {\n          className: \"help is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, this.state.emailError);\n      }\n    };\n\n    this.usernameDuplicateError = () => {\n      if (this.state.usernameError) {\n        return React.createElement(\"p\", {\n          className: \"help is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, this.state.usernameError);\n      }\n    };\n\n    this.MatchedPassword = () => {\n      if (!this.state.password || !this.state.passwordAgain) return;\n\n      if (this.state.password !== this.state.passwordAgain) {\n        return React.createElement(\"p\", {\n          className: \"help is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Passwords are not matched\");\n      } else {\n        return React.createElement(\"p\", {\n          className: \"help is-success\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"Passwords match\");\n      }\n    };\n  }\n\n  render() {\n    const modalBg = {\n      modal: {\n        background: \"white \",\n        borderRadius: \"10%\",\n        maxHeight: \"70%\",\n        height: \"100%\"\n      }\n    };\n    let signUp = React.createElement(\"div\", {\n      style: {\n        padding: \"4% \"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"text\",\n      placeholder: \"Your Username\",\n      minLength: \"5\",\n      maxLength: \"15\",\n      required: true,\n      onChange: e => this.handleChange(e, \"username\"),\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })), this.usernameDuplicateError())), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"email\",\n      placeholder: \"Your Email\",\n      required: true,\n      onChange: e => this.handleChange(e, \"email\"),\n      value: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-envelope\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), this.emailDuplicateError())), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"password\",\n      placeholder: \"Your Password\",\n      minLength: \"8\",\n      maxLength: \"20\",\n      size: \"30\",\n      required: true,\n      onChange: e => this.handleChange(e, \"password\"),\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Enter Password Again\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"password\",\n      placeholder: \"Your Password\",\n      required: true,\n      onChange: e => this.handleChange(e, \"passwordAgain\"),\n      value: this.state.passwordAgain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    })), this.MatchedPassword())), React.createElement(\"div\", {\n      className: \"field is-grouped\",\n      style: {\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"button is-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Submit\")))));\n\n    if (this.state.loading) {\n      signUp = React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\",\n          paddingTop: \"25%\",\n          paddingBottom: \"25%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), \";\");\n    }\n\n    return React.createElement(Modal, {\n      className: \"modal-lg\",\n      open: this.props.signupOpen,\n      onClose: this.props.onSwitchModal,\n      center: true,\n      styles: modalBg,\n      showCloseIcon: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, signUp);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    signupOpen: state.persistedReducer.signupOpen\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSwitchModal: () => dispatch({\n      type: \"SIGNUPMODAL\"\n    }),\n    getWarning: warning => dispatch({\n      type: \"GETWARNING\",\n      warning: warning\n    }),\n    handleLogIn: (username, userID) => dispatch({\n      type: \"SIGNUP\",\n      username: username,\n      userID: userID\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Singup);","map":{"version":3,"sources":["/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/Signup.jsx"],"names":["React","Component","axios","Modal","Spinner","connect","Singup","state","username","password","email","passwordAgain","emailError","usernameError","loading","handleChange","e","type","setState","target","value","handleSubmit","preventDefault","user","post","headers","then","res","props","onSwitchModal","getWarning","data","console","log","handleLogIn","id","localStorage","setItem","token","catch","err","response","emailDuplicateError","usernameDuplicateError","MatchedPassword","render","modalBg","modal","background","borderRadius","maxHeight","height","signUp","padding","justifyContent","textAlign","paddingTop","paddingBottom","signupOpen","mapStateToProps","persistedReducer","mapDispatchToProps","dispatch","warning","userID"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"../axios/axios-blogs\";\nimport Modal from \"react-responsive-modal\";\nimport Spinner from \"./UI/Spinner/Spinner\";\nimport { connect } from \"react-redux\";\nclass Singup extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    email: \"\",\n    passwordAgain: \"\",\n    emailError: \"\",\n    usernameError: \"\",\n    loading: false\n  };\n\n  handleChange = (e, type) => {\n    if (type === \"email\") {\n      this.setState({ emailError: \"\" });\n    }\n    if (type === \"username\") {\n      this.setState({ usernameError: \"\" });\n    }\n    this.setState({ [type]: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.setState({ loading: true });\n    if (this.state.password === this.state.passwordAgain) {\n      const { username, email, password } = this.state;\n      const user = {\n        user: {\n          username: username,\n          email: email,\n          password: password\n        }\n      };\n      axios\n        .post(\"/api/users/signup\", user, { headers: \"\" })\n        .then(res => {\n          this.setState({\n            loading: false,\n            username: \"\",\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\"\n          });\n          this.props.onSwitchModal();\n          this.props.getWarning(\n            \"A verification email has been sent to your email account, you cannot post before verification\"\n          );\n          const data = res.data;\n          console.log(res);\n          this.props.handleLogIn(data.username, data.id);\n          localStorage.setItem(\"token\", data.token);\n        })\n        .catch(err => {\n          if (err.response) {\n            this.setState({\n              emailError: err.response.data.email,\n              usernameError: err.response.data.username\n            });\n          }\n          this.setState({ loading: false });\n        });\n    }\n  };\n\n  emailDuplicateError = () => {\n    if (this.state.emailError) {\n      return <p className=\"help is-danger\">{this.state.emailError}</p>;\n    }\n  };\n  usernameDuplicateError = () => {\n    if (this.state.usernameError) {\n      return <p className=\"help is-danger\">{this.state.usernameError}</p>;\n    }\n  };\n\n  MatchedPassword = () => {\n    if (!this.state.password || !this.state.passwordAgain) return;\n    if (this.state.password !== this.state.passwordAgain) {\n      return <p className=\"help is-danger\">Passwords are not matched</p>;\n    } else {\n      return <p className=\"help is-success\">Passwords match</p>;\n    }\n  };\n\n  render() {\n    const modalBg = {\n      modal: {\n        background: \"white \",\n        borderRadius: \"10%\",\n        maxHeight: \"70%\",\n        height: \"100%\"\n      }\n    };\n\n    let signUp = (\n      <div style={{ padding: \"4% \" }}>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"field\">\n            <label className=\"label\">Username</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"text\"\n                placeholder=\"Your Username\"\n                minLength=\"5\"\n                maxLength=\"15\"\n                required\n                onChange={e => this.handleChange(e, \"username\")}\n                value={this.state.username}\n              />\n\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-user\" />\n              </span>\n              {this.usernameDuplicateError()}\n            </div>\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">Email</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"email\"\n                placeholder=\"Your Email\"\n                required\n                onChange={e => this.handleChange(e, \"email\")}\n                value={this.state.email}\n              />\n\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-envelope\" />\n              </span>\n              {this.emailDuplicateError()}\n            </div>\n          </div>\n\n          <div className=\"field\">\n            <label className=\"label\">Password</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"password\"\n                placeholder=\"Your Password\"\n                minLength=\"8\"\n                maxLength=\"20\"\n                size=\"30\"\n                required\n                onChange={e => this.handleChange(e, \"password\")}\n                value={this.state.password}\n              />\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-key\" />\n              </span>\n            </div>\n          </div>\n\n          <div className=\"field\">\n            <label className=\"label\">Enter Password Again</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"password\"\n                placeholder=\"Your Password\"\n                required\n                onChange={e => this.handleChange(e, \"passwordAgain\")}\n                value={this.state.passwordAgain}\n              />\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-key\" />\n              </span>\n              {this.MatchedPassword()}\n            </div>\n          </div>\n\n          <div\n            className=\"field is-grouped\"\n            style={{ justifyContent: \"center\" }}\n          >\n            <div className=\"control\">\n              <button type=\"submit\" className=\"button is-primary\">\n                Submit\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n\n    if (this.state.loading) {\n      signUp = (\n        <div\n          style={{\n            textAlign: \"center\",\n            paddingTop: \"25%\",\n            paddingBottom: \"25%\"\n          }}\n        >\n          <Spinner />;\n        </div>\n      );\n    }\n    return (\n      <Modal\n        className=\"modal-lg\"\n        open={this.props.signupOpen}\n        onClose={this.props.onSwitchModal}\n        center\n        styles={modalBg}\n        showCloseIcon={false}\n      >\n        {signUp}\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    signupOpen: state.persistedReducer.signupOpen\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSwitchModal: () => dispatch({ type: \"SIGNUPMODAL\" }),\n    getWarning: warning => dispatch({ type: \"GETWARNING\", warning: warning }),\n    handleLogIn: (username, userID) =>\n      dispatch({\n        type: \"SIGNUP\",\n        username: username,\n        userID: userID\n      })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Singup);\n"]},"metadata":{},"sourceType":"module"}