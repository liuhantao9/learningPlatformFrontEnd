{"ast":null,"code":"/*!\n * froala_editor v3.0.0-rc.1 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(require(\"froala-editor\")) : \"function\" == typeof define && define.amd ? define([\"froala-editor\"], t) : t(e.FroalaEditor);\n}(this, function (e) {\n  \"use strict\";\n\n  e = e && e.hasOwnProperty(\"default\") ? e[\"default\"] : e, Object.assign(e.DEFAULTS, {\n    codeMirror: window.CodeMirror,\n    codeMirrorOptions: {\n      lineNumbers: !0,\n      tabMode: \"indent\",\n      indentWithTabs: !0,\n      lineWrapping: !0,\n      mode: \"text/html\",\n      tabSize: 2\n    },\n    codeBeautifierOptions: {\n      end_with_newline: !0,\n      indent_inner_html: !0,\n      extra_liners: [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"blockquote\", \"pre\", \"ul\", \"ol\", \"table\", \"dl\"],\n      brace_style: \"expand\",\n      indent_char: \"\\t\",\n      indent_size: 1,\n      wrap_line_length: 0\n    },\n    codeViewKeepActiveButtons: [\"fullscreen\"]\n  }), e.PLUGINS.codeView = function (l) {\n    var d,\n        c,\n        f = l.$;\n\n    function h() {\n      return l.$box.hasClass(\"fr-code-view\");\n    }\n\n    function p() {\n      return c ? c.getValue() : d.val();\n    }\n\n    function u() {\n      h() && (c && c.setSize(null, l.opts.height ? l.opts.height : \"auto\"), l.opts.heightMin || l.opts.height ? l.$box.find(\".CodeMirror-scroll, .CodeMirror-gutters\").css(\"min-height\", l.opts.heightMin || l.opts.height) : l.$box.find(\".CodeMirror-scroll, .CodeMirror-gutters\").css(\"min-height\", \"\"));\n    }\n\n    var g,\n        m = !1;\n\n    function b() {\n      h() && l.events.trigger(\"blur\");\n    }\n\n    function v() {\n      h() && m && l.events.trigger(\"focus\");\n    }\n\n    function n(e) {\n      d || (!function () {\n        d = f('<textarea class=\"fr-code\" tabIndex=\"-1\">'), l.$wp.append(d), d.attr(\"dir\", l.opts.direction), l.$box.hasClass(\"fr-basic\") || (g = f('<a data-cmd=\"html\" title=\"Code View\" class=\"fr-command fr-btn html-switch' + (l.helpers.isMobile() ? \"\" : \" fr-desktop\") + '\" role=\"button\" tabIndex=\"-1\"><i class=\"fa fa-code\"></i></button>'), l.$box.append(g), l.events.bindClick(l.$box, \"a.html-switch\", function () {\n          l.events.trigger(\"commands.before\", [\"html\"]), M(!1), l.events.trigger(\"commands.after\", [\"html\"]);\n        }));\n\n        var e = function e() {\n          return !h();\n        };\n\n        l.events.on(\"buttons.refresh\", e), l.events.on(\"copy\", e, !0), l.events.on(\"cut\", e, !0), l.events.on(\"paste\", e, !0), l.events.on(\"destroy\", w, !0), l.events.on(\"html.set\", function () {\n          h() && M(!0);\n        }), l.events.on(\"codeView.update\", u), l.events.on(\"codeView.toggle\", function () {\n          l.$box.hasClass(\"fr-code-view\") && M();\n        }), l.events.on(\"form.submit\", function () {\n          h() && (l.html.set(p()), l.events.trigger(\"contentChanged\", [], !0));\n        }, !0);\n      }(), !c && l.opts.codeMirror ? ((c = l.opts.codeMirror.fromTextArea(d.get(0), l.opts.codeMirrorOptions)).on(\"blur\", b), c.on(\"focus\", v)) : (l.events.$on(d, \"keydown keyup change input\", function () {\n        l.opts.height ? this.removeAttribute(\"rows\") : (this.rows = 1, 0 === this.value.length ? this.style.height = \"auto\" : this.style.height = this.scrollHeight + \"px\");\n      }), l.events.$on(d, \"blur\", b), l.events.$on(d, \"focus\", v))), l.undo.saveStep(), l.html.cleanEmptyTags(), l.html.cleanWhiteTags(!0), l.core.hasFocus() && (l.core.isEmpty() || (l.selection.save(), l.$el.find('.fr-marker[data-type=\"true\"]').first().replaceWith('<span class=\"fr-tmp fr-sm\">F</span>'), l.$el.find('.fr-marker[data-type=\"false\"]').last().replaceWith('<span class=\"fr-tmp fr-em\">F</span>')));\n      var t = l.html.get(!1, !0);\n      l.$el.find(\"span.fr-tmp\").remove(), l.$box.toggleClass(\"fr-code-view\", !0);\n      var r,\n          o,\n          n = !1;\n\n      if (l.core.hasFocus() && (n = !0, l.events.disableBlur(), l.$el.blur()), t = (t = t.replace(/<span class=\"fr-tmp fr-sm\">F<\\/span>/, \"FROALA-SM\")).replace(/<span class=\"fr-tmp fr-em\">F<\\/span>/, \"FROALA-EM\"), l.codeBeautifier && (t = l.codeBeautifier.run(t, l.opts.codeBeautifierOptions)), c) {\n        r = t.indexOf(\"FROALA-SM\"), (o = t.indexOf(\"FROALA-EM\")) < r ? r = o : o -= 9;\n        var s = (t = t.replace(/FROALA-SM/g, \"\").replace(/FROALA-EM/g, \"\")).substring(0, r).length - t.substring(0, r).replace(/\\n/g, \"\").length,\n            i = t.substring(0, o).length - t.substring(0, o).replace(/\\n/g, \"\").length;\n        r = t.substring(0, r).length - t.substring(0, t.substring(0, r).lastIndexOf(\"\\n\") + 1).length, o = t.substring(0, o).length - t.substring(0, t.substring(0, o).lastIndexOf(\"\\n\") + 1).length, c.setSize(null, l.opts.height ? l.opts.height : \"auto\"), l.opts.heightMin && l.$box.find(\".CodeMirror-scroll\").css(\"min-height\", l.opts.heightMin), c.setValue(t), m = !n, c.focus(), m = !0, c.setSelection({\n          line: s,\n          ch: r\n        }, {\n          line: i,\n          ch: o\n        }), c.refresh(), c.clearHistory();\n      } else {\n        r = t.indexOf(\"FROALA-SM\"), o = t.indexOf(\"FROALA-EM\") - 9, l.opts.heightMin && d.css(\"min-height\", l.opts.heightMin), l.opts.height && d.css(\"height\", l.opts.height), l.opts.heightMax && d.css(\"max-height\", l.opts.height || l.opts.heightMax), d.val(t.replace(/FROALA-SM/g, \"\").replace(/FROALA-EM/g, \"\")).trigger(\"change\");\n        var a = f(l.o_doc).scrollTop();\n        m = !n, d.focus(), m = !0, d.get(0).setSelectionRange(r, o), f(l.o_doc).scrollTop(a);\n      }\n\n      l.$tb.find(\".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command\").not(e).filter(function () {\n        return l.opts.codeViewKeepActiveButtons.indexOf(f(this).data(\"cmd\")) < 0;\n      }).addClass(\"fr-disabled\").attr(\"aria-disabled\", !0), e.addClass(\"fr-active\").attr(\"aria-pressed\", !0), !l.helpers.isMobile() && l.opts.toolbarInline && l.toolbar.hide();\n    }\n\n    function M(e) {\n      void 0 === e && (e = !h());\n      var t,\n          r,\n          o = l.$tb.find('.fr-command[data-cmd=\"html\"]');\n      e ? (l.popups.hideAll(), n(o)) : (l.$box.toggleClass(\"fr-code-view\", !1), t = o, r = p(), l.html.set(r), l.$el.blur(), l.$tb.find(\".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command\").not(t).removeClass(\"fr-disabled\").attr(\"aria-disabled\", !1), t.removeClass(\"fr-active\").attr(\"aria-pressed\", !1), l.selection.setAtStart(l.el), l.selection.restore(), l.placeholder.refresh(), l.undo.saveStep());\n    }\n\n    function w() {\n      h() && M(!1), c && c.toTextArea(), d.val(\"\").removeData().remove(), d = null, g && (g.remove(), g = null);\n    }\n\n    return {\n      _init: function _init() {\n        if (l.events.on(\"focus\", function () {\n          var e;\n          l.opts.toolbarContainer && (e = l.$tb.find('.fr-command[data-cmd=\"html\"]'), h() ? (l.$tb.find(\".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command\").not(e).filter(function () {\n            return l.opts.codeViewKeepActiveButtons.indexOf(f(this).data(\"cmd\")) < 0;\n          }).addClass(\"fr-disabled\").attr(\"aria-disabled\", !1), e.addClass(\"fr-active\").attr(\"aria-pressed\", !1)) : (l.$tb.find(\".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command\").not(e).removeClass(\"fr-disabled\").attr(\"aria-disabled\", !1), e.removeClass(\"fr-active\").attr(\"aria-pressed\", !1)));\n        }), !l.$wp) return !1;\n      },\n      toggle: M,\n      isActive: h,\n      get: p\n    };\n  }, e.RegisterCommand(\"html\", {\n    title: \"Code View\",\n    undo: !1,\n    focus: !1,\n    forcedRefresh: !0,\n    toggle: !0,\n    callback: function callback() {\n      this.codeView.toggle();\n    },\n    plugin: \"codeView\"\n  }), e.DefineIcon(\"html\", {\n    NAME: \"code\",\n    SVG_KEY: \"codeView\"\n  });\n});","map":null,"metadata":{},"sourceType":"script"}