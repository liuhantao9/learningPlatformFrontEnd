{"ast":null,"code":"var _jsxFileName = \"/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/Signup.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"react-responsive-modal\";\nimport Spinner from \"./UI/Spinner/Spinner\";\nimport { connect } from \"react-redux\";\n\nclass Singup extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      email: \"\",\n      passwordAgain: \"\",\n      emailError: \"\",\n      usernameError: \"\",\n      loading: false\n    };\n\n    this.handleChange = (e, type) => {\n      if (type === \"email\") {\n        this.setState({\n          emailError: \"\"\n        });\n      }\n\n      if (type === \"username\") {\n        this.setState({\n          usernameError: \"\"\n        });\n      }\n\n      this.setState({\n        [type]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        loading: true\n      });\n\n      if (this.state.password === this.state.passwordAgain) {\n        const _this$state = this.state,\n              username = _this$state.username,\n              email = _this$state.email,\n              password = _this$state.password;\n        const user = {\n          user: {\n            username: username,\n            email: email,\n            password: password\n          }\n        };\n        axios.post(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/users/signup\"), user).then(res => {\n          this.setState({\n            loading: false,\n            username: \"\",\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\"\n          });\n          localStorage.setItem(\"token\", res.data.token);\n          this.props.onSwitchModal();\n          this.props.handleLogIn();\n        }).catch(err => {\n          if (err.response) {\n            this.setState({\n              emailError: err.response.data.email,\n              usernameError: err.response.data.username\n            });\n          }\n\n          this.setState({\n            loading: false\n          });\n        });\n      }\n    };\n\n    this.emailDuplicateError = () => {\n      if (this.state.emailError) {\n        return React.createElement(\"p\", {\n          className: \"help is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, this.state.emailError);\n      }\n    };\n\n    this.usernameDuplicateError = () => {\n      if (this.state.usernameError) {\n        return React.createElement(\"p\", {\n          className: \"help is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, this.state.usernameError);\n      }\n    };\n\n    this.MatchedPassword = () => {\n      if (!this.state.password || !this.state.passwordAgain) return;\n\n      if (this.state.password !== this.state.passwordAgain) {\n        return React.createElement(\"p\", {\n          className: \"help is-danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Passwords are not matched\");\n      } else {\n        return React.createElement(\"p\", {\n          className: \"help is-success\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"Passwords match\");\n      }\n    };\n  }\n\n  render() {\n    const modalBg = {\n      modal: {\n        background: \"white \",\n        borderRadius: \"10%\",\n        maxHeight: \"70%\",\n        height: \"100%\",\n        maxWidth: \"30%\",\n        width: \"100%\"\n      }\n    };\n    let signUp = React.createElement(\"div\", {\n      style: {\n        padding: \"4%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"text\",\n      placeholder: \"Your Username\",\n      minLength: \"5\",\n      maxLength: \"15\",\n      required: true,\n      onChange: e => this.handleChange(e, \"username\"),\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })), this.usernameDuplicateError())), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"email\",\n      placeholder: \"Your Email\",\n      required: true,\n      onChange: e => this.handleChange(e, \"email\"),\n      value: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-envelope\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })), this.emailDuplicateError())), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"password\",\n      placeholder: \"Your Password\",\n      minLength: \"8\",\n      maxLength: \"20\",\n      required: true,\n      onChange: e => this.handleChange(e, \"password\"),\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Enter Password Again\"), React.createElement(\"div\", {\n      className: \"control has-icons-left has-icons-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input is-primary\",\n      type: \"password\",\n      placeholder: \"Your Password\",\n      required: true,\n      onChange: e => this.handleChange(e, \"passwordAgain\"),\n      value: this.state.passwordAgain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"icon is-small is-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), this.MatchedPassword())), React.createElement(\"div\", {\n      className: \"field is-grouped\",\n      style: {\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"button is-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Submit\")))));\n\n    if (this.state.loading) {\n      signUp = React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Modal, {\n      className: \"modal-lg\",\n      open: this.props.signupOpen,\n      onClose: this.props.onSwitchModal,\n      center: true,\n      styles: modalBg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, signUp);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    signupOpen: state.persistedReducer.signupOpen\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSwitchModal: () => dispatch({\n      type: \"SIGNUPMODAL\"\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Singup);","map":{"version":3,"sources":["/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/Signup.jsx"],"names":["React","Component","axios","Modal","Spinner","connect","Singup","state","username","password","email","passwordAgain","emailError","usernameError","loading","handleChange","e","type","setState","target","value","handleSubmit","preventDefault","user","post","process","env","REACT_APP_BACKEND_SERVER","then","res","localStorage","setItem","data","token","props","onSwitchModal","handleLogIn","catch","err","response","emailDuplicateError","usernameDuplicateError","MatchedPassword","render","modalBg","modal","background","borderRadius","maxHeight","height","maxWidth","width","signUp","padding","justifyContent","signupOpen","mapStateToProps","persistedReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"react-responsive-modal\";\nimport Spinner from \"./UI/Spinner/Spinner\";\nimport { connect } from \"react-redux\";\nclass Singup extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    email: \"\",\n    passwordAgain: \"\",\n    emailError: \"\",\n    usernameError: \"\",\n    loading: false\n  };\n\n  handleChange = (e, type) => {\n    if (type === \"email\") {\n      this.setState({ emailError: \"\" });\n    }\n    if (type === \"username\") {\n      this.setState({ usernameError: \"\" });\n    }\n    this.setState({ [type]: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.setState({ loading: true });\n    if (this.state.password === this.state.passwordAgain) {\n      const { username, email, password } = this.state;\n      const user = {\n        user: {\n          username: username,\n          email: email,\n          password: password\n        }\n      };\n      axios\n        .post(`${process.env.REACT_APP_BACKEND_SERVER}/api/users/signup`, user)\n        .then(res => {\n          this.setState({\n            loading: false,\n            username: \"\",\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\"\n          });\n          localStorage.setItem(\"token\", res.data.token);\n          this.props.onSwitchModal();\n          this.props.handleLogIn();\n        })\n        .catch(err => {\n          if (err.response) {\n            this.setState({\n              emailError: err.response.data.email,\n              usernameError: err.response.data.username\n            });\n          }\n          this.setState({ loading: false });\n        });\n    }\n  };\n\n  emailDuplicateError = () => {\n    if (this.state.emailError) {\n      return <p className=\"help is-danger\">{this.state.emailError}</p>;\n    }\n  };\n  usernameDuplicateError = () => {\n    if (this.state.usernameError) {\n      return <p className=\"help is-danger\">{this.state.usernameError}</p>;\n    }\n  };\n\n  MatchedPassword = () => {\n    if (!this.state.password || !this.state.passwordAgain) return;\n    if (this.state.password !== this.state.passwordAgain) {\n      return <p className=\"help is-danger\">Passwords are not matched</p>;\n    } else {\n      return <p className=\"help is-success\">Passwords match</p>;\n    }\n  };\n\n  render() {\n    const modalBg = {\n      modal: {\n        background: \"white \",\n        borderRadius: \"10%\",\n        maxHeight: \"70%\",\n        height: \"100%\",\n        maxWidth: \"30%\",\n        width: \"100%\"\n      }\n    };\n\n    let signUp = (\n      <div style={{ padding: \"4%\" }}>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"field\">\n            <label className=\"label\">Username</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"text\"\n                placeholder=\"Your Username\"\n                minLength=\"5\"\n                maxLength=\"15\"\n                required\n                onChange={e => this.handleChange(e, \"username\")}\n                value={this.state.username}\n              />\n\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-user\" />\n              </span>\n              {this.usernameDuplicateError()}\n            </div>\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">Email</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"email\"\n                placeholder=\"Your Email\"\n                required\n                onChange={e => this.handleChange(e, \"email\")}\n                value={this.state.email}\n              />\n\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-envelope\" />\n              </span>\n              {this.emailDuplicateError()}\n            </div>\n          </div>\n\n          <div className=\"field\">\n            <label className=\"label\">Password</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"password\"\n                placeholder=\"Your Password\"\n                minLength=\"8\"\n                maxLength=\"20\"\n                required\n                onChange={e => this.handleChange(e, \"password\")}\n                value={this.state.password}\n              />\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-key\" />\n              </span>\n            </div>\n          </div>\n\n          <div className=\"field\">\n            <label className=\"label\">Enter Password Again</label>\n            <div className=\"control has-icons-left has-icons-right\">\n              <input\n                className=\"input is-primary\"\n                type=\"password\"\n                placeholder=\"Your Password\"\n                required\n                onChange={e => this.handleChange(e, \"passwordAgain\")}\n                value={this.state.passwordAgain}\n              />\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-key\" />\n              </span>\n              {this.MatchedPassword()}\n            </div>\n          </div>\n\n          <div\n            className=\"field is-grouped\"\n            style={{ justifyContent: \"center\" }}\n          >\n            <div className=\"control\">\n              <button type=\"submit\" className=\"button is-primary\">\n                Submit\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n\n    if (this.state.loading) {\n      signUp = <Spinner />;\n    }\n    return (\n      <Modal\n        className=\"modal-lg\"\n        open={this.props.signupOpen}\n        onClose={this.props.onSwitchModal}\n        center\n        styles={modalBg}\n      >\n        {signUp}\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    signupOpen: state.persistedReducer.signupOpen\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSwitchModal: () => dispatch({ type: \"SIGNUPMODAL\" })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Singup);\n"]},"metadata":{},"sourceType":"module"}