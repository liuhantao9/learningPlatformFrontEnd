{"ast":null,"code":"var _jsxFileName = \"/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/userProfile/userProfileComponent/headingSection.jsx\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"../../../axios-blogs\";\nimport profile from \"../../../assets/img/Portrait_Placeholder.png\";\n\nvar faker = require(\"faker\");\n\nclass HeadingSection extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedFile: null,\n      loading: false\n    };\n\n    this.fileHandler = e => {\n      this.setState({\n        selectedFile: e.target.files[0]\n      });\n      var reader = new FileReader();\n\n      reader.onload = function () {\n        var dataURL = reader.result;\n        var output = document.getElementById(\"profile\");\n        output.src = dataURL;\n        output.width = \"128px\";\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n    };\n\n    this.handleUpload = () => {\n      if (this.state.selectedFile) {\n        const data = new FormData();\n        data.append(\"avatar\", this.state.selectedFile);\n        this.setState({\n          loading: true\n        });\n        const token = localStorage.getItem(\"token\");\n        const headers = {\n          headers: {\n            Authorization: \"Token \".concat(token),\n            withCredentials: true\n          }\n        };\n        axios.post(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/users/profile/\").concat(this.props.userID), data, headers).then(res => {\n          // then print response status\n          // new Promise(resolve => setTimeout(resolve, 3000));\n          this.setState({\n            loading: false\n          });\n          this.props.updateAvatar(res.data.avatar);\n          this.setState({\n            selectedFile: null\n          });\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          this.setState({\n            selectedFile: null\n          });\n        });\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"section profile-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"columns is-mobile is-multiline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"column is-2-tablet is-6-mobile name\",\n      style: {\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"header-icon user-profile-image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      className: \"image is-square\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"profile\",\n      src: this.props.avatar || profile,\n      style: {\n        filter: \"blur(\".concat(this.state.loading ? 2 : 0, \"px)\")\n      },\n      width: \"128px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"file is-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      class: \"file-label\",\n      style: {\n        margin: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"file-input\",\n      ode: true,\n      type: \"file\",\n      name: \"resume\",\n      onChange: this.fileHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"file-cta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"file-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fas fa-upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      class: \"file-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Select Images\")))), React.createElement(\"a\", {\n      class: \"button is-active is-small \".concat(this.state.loading ? \"is-loading\" : \"\"),\n      onClick: this.handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Upload\"))), React.createElement(\"div\", {\n      className: \"column is-6-tablet is-6-mobile name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title is-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.props.username), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"button is-primary is-outlined\",\n      href: \"#\",\n      id: \"edit-preferences\",\n      style: {\n        margin: \"5px 0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Edit Preferences\")), React.createElement(\"p\", {\n      className: \"tagline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"The users profile bio would go here, of course. It could be two lines or more or whatever. We should probably limit the amount of characters to ~500 at most though.\")), React.createElement(\"div\", {\n      className: \"column is-1-tablet is-2-mobile has-text-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"column is-1-tablet is-4-mobile has-text-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"stat-val\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"30\"), React.createElement(\"p\", {\n      className: \"stat-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"reputation\")), React.createElement(\"div\", {\n      className: \"column is-1-tablet is-4-mobile has-text-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"stat-val\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"10\"), React.createElement(\"p\", {\n      className: \"stat-key\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"likes\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.persistedReducer.username,\n    userID: state.persistedReducer.userID,\n    avatar: state.persistedReducer.avatar\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateAvatar: avatar => dispatch({\n      type: \"UPDATEAVATAR\",\n      avatar: avatar\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeadingSection);","map":{"version":3,"sources":["/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/userProfile/userProfileComponent/headingSection.jsx"],"names":["React","connect","axios","profile","faker","require","HeadingSection","Component","state","selectedFile","loading","fileHandler","e","setState","target","files","reader","FileReader","onload","dataURL","result","output","document","getElementById","src","width","readAsDataURL","handleUpload","data","FormData","append","token","localStorage","getItem","headers","Authorization","withCredentials","post","process","env","REACT_APP_BACKEND_SERVER","props","userID","then","res","updateAvatar","avatar","catch","err","render","textAlign","filter","margin","username","mapStateToProps","persistedReducer","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"../../../axios-blogs\";\nimport profile from \"../../../assets/img/Portrait_Placeholder.png\";\n\nvar faker = require(\"faker\");\n\nclass HeadingSection extends React.Component {\n  state = {\n    selectedFile: null,\n    loading: false\n  };\n\n  fileHandler = e => {\n    this.setState({\n      selectedFile: e.target.files[0]\n    });\n    var reader = new FileReader();\n    reader.onload = function () {\n      var dataURL = reader.result;\n      var output = document.getElementById(\"profile\");\n      output.src = dataURL;\n      output.width = \"128px\";\n    };\n    reader.readAsDataURL(e.target.files[0]);\n  };\n\n  handleUpload = () => {\n    if (this.state.selectedFile) {\n      const data = new FormData();\n      data.append(\"avatar\", this.state.selectedFile);\n      this.setState({ loading: true });\n\n      const token = localStorage.getItem(\"token\");\n      const headers = {\n        headers: {\n          Authorization: `Token ${token}`,\n          withCredentials: true\n        }\n      };\n      axios\n        .post(\n          `${process.env.REACT_APP_BACKEND_SERVER}/api/users/profile/${\n          this.props.userID\n          }`,\n          data,\n          headers\n        )\n        .then(res => {\n          // then print response status\n          // new Promise(resolve => setTimeout(resolve, 3000));\n          this.setState({ loading: false });\n          this.props.updateAvatar(res.data.avatar);\n          this.setState({ selectedFile: null });\n        })\n        .catch(err => {\n          this.setState({ loading: false });\n          this.setState({ selectedFile: null });\n        });\n    }\n  };\n  render() {\n    return (\n      <div className=\"section profile-heading\">\n        <div className=\"columns is-mobile is-multiline\">\n          <div\n            className=\"column is-2-tablet is-6-mobile name\"\n            style={{ textAlign: \"center\" }}\n          >\n            <span className=\"header-icon user-profile-image\">\n              <figure className=\"image is-square\">\n                <img\n                  id=\"profile\"\n                  src={this.props.avatar || profile}\n                  style={{ filter: `blur(${this.state.loading ? 2 : 0}px)` }}\n                  width=\"128px\"\n                />\n              </figure>\n              <div className=\"file is-small\">\n                <label class=\"file-label\" style={{ margin: \"auto\" }}>\n                  <input\n                    class=\"file-input\"\n                    ode\n                    type=\"file\"\n                    name=\"resume\"\n                    onChange={this.fileHandler}\n                  />\n                  <span class=\"file-cta\">\n                    <span class=\"file-icon\">\n                      <i class=\"fas fa-upload\" />\n                    </span>\n                    <span class=\"file-label\">Select Images</span>\n                  </span>\n                </label>\n              </div>\n              <a\n                class={`button is-active is-small ${\n                  this.state.loading ? \"is-loading\" : \"\"\n                  }`}\n                onClick={this.handleUpload}\n              >\n                Upload\n              </a>\n            </span>\n          </div>\n          <div className=\"column is-6-tablet is-6-mobile name\">\n            <p>\n              <span className=\"title is-bold\">{this.props.username}</span>\n              <br />\n              <a\n                className=\"button is-primary is-outlined\"\n                href=\"#\"\n                id=\"edit-preferences\"\n                style={{ margin: \"5px 0\" }}\n              >\n                Edit Preferences\n              </a>\n            </p>\n            <p className=\"tagline\">\n              The users profile bio would go here, of course. It could be two\n              lines or more or whatever. We should probably limit the amount of\n              characters to ~500 at most though.\n            </p>\n          </div>\n          <div className=\"column is-1-tablet is-2-mobile has-text-centered\" />\n          <div className=\"column is-1-tablet is-4-mobile has-text-centered\">\n            <p className=\"stat-val\">30</p>\n            <p className=\"stat-key\">reputation</p>\n          </div>\n          <div className=\"column is-1-tablet is-4-mobile has-text-centered\">\n            <p className=\"stat-val\">10</p>\n            <p className=\"stat-key\">likes</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.persistedReducer.username,\n    userID: state.persistedReducer.userID,\n    avatar: state.persistedReducer.avatar\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateAvatar: avatar => dispatch({ type: \"UPDATEAVATAR\", avatar: avatar })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(HeadingSection);\n"]},"metadata":{},"sourceType":"module"}