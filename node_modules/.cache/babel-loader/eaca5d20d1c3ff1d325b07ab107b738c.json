{"ast":null,"code":"/*!\n * froala_editor v3.0.0-rc.1 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(require(\"froala-editor\")) : \"function\" == typeof define && define.amd ? define([\"froala-editor\"], t) : t(e.FroalaEditor);\n}(this, function (k) {\n  \"use strict\";\n\n  k = k && k.hasOwnProperty(\"default\") ? k[\"default\"] : k, Object.assign(k.POPUP_TEMPLATES, {\n    \"file.insert\": \"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]\"\n  }), Object.assign(k.DEFAULTS, {\n    fileUpload: !0,\n    fileUploadURL: null,\n    fileUploadParam: \"file\",\n    fileUploadParams: {},\n    fileUploadToS3: !1,\n    fileUploadMethod: \"POST\",\n    fileMaxSize: 10485760,\n    fileAllowedTypes: [\"*\"],\n    fileInsertButtons: [\"fileBack\", \"|\"],\n    fileUseSelectedText: !1\n  }), k.PLUGINS.file = function (f) {\n    var r,\n        l = f.$,\n        p = \"https://i.froala.com/upload\",\n        d = 2,\n        u = 3,\n        c = 4,\n        v = 5,\n        g = 6,\n        i = {};\n\n    function h() {\n      var e = f.popups.get(\"file.insert\");\n      e || (e = T()), e.find(\".fr-layer.fr-active\").removeClass(\"fr-active\").addClass(\"fr-pactive\"), e.find(\".fr-file-progress-bar-layer\").addClass(\"fr-active\"), e.find(\".fr-buttons\").hide(), o(f.language.translate(\"Uploading\"), 0);\n    }\n\n    function a(e) {\n      var t = f.popups.get(\"file.insert\");\n      t && (t.find(\".fr-layer.fr-pactive\").addClass(\"fr-active\").removeClass(\"fr-pactive\"), t.find(\".fr-file-progress-bar-layer\").removeClass(\"fr-active\"), t.find(\".fr-buttons\").show(), e && (f.events.focus(), f.popups.hide(\"file.insert\")));\n    }\n\n    function o(e, t) {\n      var i = f.popups.get(\"file.insert\");\n\n      if (i) {\n        var r = i.find(\".fr-file-progress-bar-layer\");\n        r.find(\"h3\").text(e + (t ? \" \" + t + \"%\" : \"\")), r.removeClass(\"fr-error\"), t ? (r.find(\"div\").removeClass(\"fr-indeterminate\"), r.find(\"div > span\").css(\"width\", t + \"%\")) : r.find(\"div\").addClass(\"fr-indeterminate\");\n      }\n    }\n\n    function b(e, t, i) {\n      f.edit.on(), f.events.focus(!0), f.selection.restore(), f.opts.fileUseSelectedText && f.selection.text().length && (t = f.selection.text()), f.html.insert('<a href=\"' + e + '\" target=\"_blank\" id=\"fr-inserted-file\" class=\"fr-file\">' + t + \"</a>\");\n      var r = f.$el.find(\"#fr-inserted-file\");\n      r.removeAttr(\"id\"), f.popups.hide(\"file.insert\"), f.undo.saveStep(), w(), f.events.trigger(\"file.inserted\", [r, i]);\n    }\n\n    function m(e) {\n      var t = this.status,\n          i = this.response,\n          r = this.responseXML,\n          o = this.responseText;\n\n      try {\n        if (f.opts.fileUploadToS3) {\n          if (201 === t) {\n            var a = function (e) {\n              try {\n                var t = l(e).find(\"Location\").text(),\n                    i = l(e).find(\"Key\").text();\n                return !1 === f.events.trigger(\"file.uploadedToS3\", [t, i, e], !0) ? (f.edit.on(), !1) : t;\n              } catch (r) {\n                return S(c, e), !1;\n              }\n            }(r);\n\n            a && b(a, e, i || r);\n          } else S(c, i || r);\n        } else if (200 <= t && t < 300) {\n          var n = function (e) {\n            try {\n              if (!1 === f.events.trigger(\"file.uploaded\", [e], !0)) return f.edit.on(), !1;\n              var t = JSON.parse(e);\n              return t.link ? t : (S(d, e), !1);\n            } catch (i) {\n              return S(c, e), !1;\n            }\n          }(o);\n\n          n && b(n.link, e, i || o);\n        } else S(u, i || o);\n      } catch (s) {\n        S(c, i || o);\n      }\n    }\n\n    function y() {\n      S(c, this.response || this.responseText || this.responseXML);\n    }\n\n    function U(e) {\n      if (e.lengthComputable) {\n        var t = e.loaded / e.total * 100 | 0;\n        o(f.language.translate(\"Uploading\"), t);\n      }\n    }\n\n    function S(e, t) {\n      f.edit.on(), function (e) {\n        h();\n        var t = f.popups.get(\"file.insert\").find(\".fr-file-progress-bar-layer\");\n        t.addClass(\"fr-error\");\n        var i = t.find(\"h3\");\n        i.text(e), f.events.disableBlur(), i.focus();\n      }(f.language.translate(\"Something went wrong. Please try again.\")), f.events.trigger(\"file.error\", [{\n        code: e,\n        message: i[e]\n      }, t]);\n    }\n\n    function C() {\n      f.edit.on(), a(!0);\n    }\n\n    function n(e) {\n      if (void 0 !== e && 0 < e.length) {\n        if (!1 === f.events.trigger(\"file.beforeUpload\", [e])) return !1;\n        var t,\n            i = e[0];\n        if ((null === f.opts.fileUploadURL || f.opts.fileUploadURL === p) && !f.opts.fileUploadToS3) return s = i, (l = new FileReader()).onload = function () {\n          for (var e = l.result, t = atob(l.result.split(\",\")[1]), i = [], r = 0; r < t.length; r++) {\n            i.push(t.charCodeAt(r));\n          }\n\n          e = window.URL.createObjectURL(new Blob([new Uint8Array(i)], {\n            type: s.type\n          })), f.file.insert(e, s.name, null);\n        }, h(), l.readAsDataURL(s), !1;\n        if (i.size > f.opts.fileMaxSize) return S(v), !1;\n        if (f.opts.fileAllowedTypes.indexOf(\"*\") < 0 && f.opts.fileAllowedTypes.indexOf(i.type.replace(/file\\//g, \"\")) < 0) return S(g), !1;\n\n        if (f.drag_support.formdata && (t = f.drag_support.formdata ? new FormData() : null), t) {\n          var r;\n          if (!1 !== f.opts.fileUploadToS3) for (r in t.append(\"key\", f.opts.fileUploadToS3.keyStart + new Date().getTime() + \"-\" + (i.name || \"untitled\")), t.append(\"success_action_status\", \"201\"), t.append(\"X-Requested-With\", \"xhr\"), t.append(\"Content-Type\", i.type), f.opts.fileUploadToS3.params) {\n            f.opts.fileUploadToS3.params.hasOwnProperty(r) && t.append(r, f.opts.fileUploadToS3.params[r]);\n          }\n\n          for (r in f.opts.fileUploadParams) {\n            f.opts.fileUploadParams.hasOwnProperty(r) && t.append(r, f.opts.fileUploadParams[r]);\n          }\n\n          t.append(f.opts.fileUploadParam, i);\n          var o = f.opts.fileUploadURL;\n          f.opts.fileUploadToS3 && (o = f.opts.fileUploadToS3.uploadURL ? f.opts.fileUploadToS3.uploadURL : \"https://\" + f.opts.fileUploadToS3.region + \".amazonaws.com/\" + f.opts.fileUploadToS3.bucket);\n          var a = f.core.getXHR(o, f.opts.fileUploadMethod);\n          a.onload = function () {\n            m.call(a, i.name);\n          }, a.onerror = y, a.upload.onprogress = U, a.onabort = C, h();\n          var n = f.popups.get(\"file.insert\");\n          n && (n.off(\"abortUpload\"), n.on(\"abortUpload\", function () {\n            4 !== a.readyState && a.abort();\n          })), a.send(t);\n        }\n      }\n\n      var s, l;\n    }\n\n    function s() {\n      a();\n    }\n\n    function T(e) {\n      if (e) return f.popups.onHide(\"file.insert\", s), !0;\n      var t;\n      f.opts.fileUpload || f.opts.fileInsertButtons.splice(f.opts.fileInsertButtons.indexOf(\"fileUpload\"), 1), t = '<div class=\"fr-buttons fr-tabs\">' + f.button.buildList(f.opts.fileInsertButtons) + \"</div>\";\n      var i = \"\";\n      f.opts.fileUpload && (i = '<div class=\"fr-file-upload-layer fr-layer fr-active\" id=\"fr-file-upload-layer-' + f.id + '\"><strong>' + f.language.translate(\"Drop file\") + \"</strong><br>(\" + f.language.translate(\"or click\") + ')<div class=\"fr-form\"><input type=\"file\" name=\"' + f.opts.fileUploadParam + '\" accept=\"' + (0 <= f.opts.fileAllowedTypes.indexOf(\"*\") ? \"/\" : \"\") + f.opts.fileAllowedTypes.join(\", \").toLowerCase() + '\" tabIndex=\"-1\" aria-labelledby=\"fr-file-upload-layer-' + f.id + '\" role=\"button\"></div></div>');\n      var r,\n          o = {\n        buttons: t,\n        upload_layer: i,\n        progress_bar: '<div class=\"fr-file-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"fileDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\n      },\n          a = f.popups.create(\"file.insert\", o);\n      return r = a, f.events.$on(r, \"dragover dragenter\", \".fr-file-upload-layer\", function () {\n        return l(this).addClass(\"fr-drop\"), !1;\n      }, !0), f.events.$on(r, \"dragleave dragend\", \".fr-file-upload-layer\", function () {\n        return l(this).removeClass(\"fr-drop\"), !1;\n      }, !0), f.events.$on(r, \"drop\", \".fr-file-upload-layer\", function (e) {\n        e.preventDefault(), e.stopPropagation(), l(this).removeClass(\"fr-drop\");\n        var t = e.originalEvent.dataTransfer;\n        t && t.files && (r.data(\"instance\") || f).file.upload(t.files);\n      }, !0), f.helpers.isIOS() && f.events.$on(r, \"touchstart\", '.fr-file-upload-layer input[type=\"file\"]', function () {\n        l(this).trigger(\"click\");\n      }), f.events.$on(r, \"change\", '.fr-file-upload-layer input[type=\"file\"]', function () {\n        if (this.files) {\n          var e = r.data(\"instance\") || f;\n          e.events.disableBlur(), r.find(\"input:focus\").blur(), e.events.enableBlur(), e.file.upload(this.files);\n        }\n\n        l(this).val(\"\");\n      }, !0), a;\n    }\n\n    function e(e) {\n      f.node.hasClass(e, \"fr-file\");\n    }\n\n    function t(e) {\n      var t = e.originalEvent.dataTransfer;\n\n      if (t && t.files && t.files.length) {\n        var i = t.files[0];\n\n        if (i && \"undefined\" != typeof i.type) {\n          if (i.type.indexOf(\"image\") < 0) {\n            if (!f.opts.fileUpload) return e.preventDefault(), e.stopPropagation(), !1;\n            f.markers.remove(), f.markers.insertAtPoint(e.originalEvent), f.$el.find(\".fr-marker\").replaceWith(k.MARKERS), f.popups.hideAll();\n            var r = f.popups.get(\"file.insert\");\n            return r || (r = T()), f.popups.setContainer(\"file.insert\", f.$sc), f.popups.show(\"file.insert\", e.originalEvent.pageX, e.originalEvent.pageY), h(), n(t.files), e.preventDefault(), e.stopPropagation(), !1;\n          }\n        } else i.type.indexOf(\"image\") < 0 && (e.preventDefault(), e.stopPropagation());\n      }\n    }\n\n    function w() {\n      var e,\n          t = Array.prototype.slice.call(f.el.querySelectorAll(\"a.fr-file\")),\n          i = [];\n\n      for (e = 0; e < t.length; e++) {\n        i.push(t[e].getAttribute(\"href\"));\n      }\n\n      if (r) for (e = 0; e < r.length; e++) {\n        i.indexOf(r[e].getAttribute(\"href\")) < 0 && f.events.trigger(\"file.unlink\", [r[e]]);\n      }\n      r = t;\n    }\n\n    return i[1] = \"File cannot be loaded from the passed link.\", i[d] = \"No link in upload response.\", i[u] = \"Error during file upload.\", i[c] = \"Parsing response failed.\", i[v] = \"File is too large.\", i[g] = \"File file type is invalid.\", i[7] = \"Files can be uploaded only to same domain in IE 8 and IE 9.\", {\n      _init: function _init() {\n        f.events.on(\"drop\", t), f.events.$on(f.$win, \"keydown\", function (e) {\n          var t = e.which,\n              i = f.popups.get(\"file.insert\");\n          i && t === k.KEYCODE.ESC && i.trigger(\"abortUpload\");\n        }), f.events.on(\"destroy\", function () {\n          var e = f.popups.get(\"file.insert\");\n          e && e.trigger(\"abortUpload\");\n        }), f.events.on(\"link.beforeRemove\", e), f.$wp && (w(), f.events.on(\"contentChanged\", w)), T(!0);\n      },\n      showInsertPopup: function showInsertPopup() {\n        var e = f.$tb.find('.fr-command[data-cmd=\"insertFile\"]'),\n            t = f.popups.get(\"file.insert\");\n        if (t || (t = T()), a(), !t.hasClass(\"fr-active\")) if (f.popups.refresh(\"file.insert\"), f.popups.setContainer(\"file.insert\", f.$tb), e.isVisible) {\n          var i = f.button.getPosition(e),\n              r = i.left,\n              o = i.top;\n          f.popups.show(\"file.insert\", r, o, e.outerHeight());\n        } else f.position.forSelection(t), f.popups.show(\"file.insert\");\n      },\n      upload: n,\n      insert: b,\n      back: function back() {\n        f.events.disableBlur(), f.selection.restore(), f.events.enableBlur(), f.popups.hide(\"file.insert\"), f.toolbar.showInline();\n      },\n      hideProgressBar: a\n    };\n  }, k.DefineIcon(\"insertFile\", {\n    NAME: \"file-o\",\n    FA5NAME: \"file\",\n    SVG_KEY: \"insertFile\"\n  }), k.RegisterCommand(\"insertFile\", {\n    title: \"Upload File\",\n    undo: !1,\n    focus: !0,\n    refreshAfterCallback: !1,\n    popup: !0,\n    callback: function callback() {\n      this.popups.isVisible(\"file.insert\") ? (this.$el.find(\".fr-marker\").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide(\"file.insert\")) : this.file.showInsertPopup();\n    },\n    plugin: \"file\"\n  }), k.DefineIcon(\"fileBack\", {\n    NAME: \"arrow-left\",\n    SVG_KEY: \"back\"\n  }), k.RegisterCommand(\"fileBack\", {\n    title: \"Back\",\n    undo: !1,\n    focus: !1,\n    back: !0,\n    refreshAfterCallback: !1,\n    callback: function callback() {\n      this.file.back();\n    },\n    refresh: function refresh(e) {\n      this.opts.toolbarInline ? (e.removeClass(\"fr-hidden\"), e.next(\".fr-separator\").removeClass(\"fr-hidden\")) : (e.addClass(\"fr-hidden\"), e.next(\".fr-separator\").addClass(\"fr-hidden\"));\n    }\n  }), k.RegisterCommand(\"fileDismissError\", {\n    title: \"OK\",\n    callback: function callback() {\n      this.file.hideProgressBar(!0);\n    }\n  });\n});","map":null,"metadata":{},"sourceType":"script"}