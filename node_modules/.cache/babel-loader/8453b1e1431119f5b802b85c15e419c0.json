{"ast":null,"code":"var _jsxFileName = \"/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/userProfile/userProfileComponent/simplifiedPost.jsx\";\nimport React from \"react\";\nimport Modal from \"react-responsive-modal\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { confirmAlert } from \"react-custom-confirm-alert\";\nimport 'react-custom-confirm-alert/src/react-confirm-alert.css';\n\nclass SimplifiedPost extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openComment: false\n    };\n    this.handleComment = this.handleComment.bind(this);\n    this.handleStopPropagation = this.handleStopPropagation.bind(this);\n  }\n\n  spaceDividor() {\n    return React.createElement(\"div\", {\n      style: {\n        margin: \"5px\",\n        display: \"inline-block\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    });\n  }\n\n  createTagGroup() {\n    const tagNames = this.props.tagNames;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, tagNames.map(tagName => React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"button is-primary is-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, tagName)), this.spaceDividor())));\n  }\n\n  handleComment(e) {\n    this.setState({\n      openComment: !this.state.openComment\n    });\n    e.preventDefault();\n  }\n\n  handleStopPropagation(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  handleDelete(e, objectID) {\n    const token = localStorage.getItem(\"token\");\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Token \".concat(token),\n        withCredentials: true\n      }\n    };\n    const liked = this.props.likedPosts.includes(objectID);\n    axios.delete(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/users/likes/\").concat(this.props.userID, \"?postID=\").concat(objectID), headers);\n    axios.patch(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/posts/likes/\").concat(objectID), {\n      liked: liked\n    }, headers).then(res => {\n      this.props.handleLike(objectID, liked);\n    }).catch(err => err);\n  }\n\n  deleteControl() {\n    const _this$props = this.props,\n          title = _this$props.title,\n          objectID = _this$props.objectID,\n          PostType = _this$props.PostType,\n          userID = _this$props.userID,\n          myPosts = _this$props.myPosts;\n\n    if (PostType === \"MyPosts\") {\n      return React.createElement(\"a\", {\n        className: \"level-item\",\n        \"aria-label\": \"cancel\",\n        onClick: e => {\n          confirmAlert({\n            message: 'Your post will be deleted permanently, are you sure to do this?',\n            buttons: [{\n              label: 'Yes',\n              onClick: () => {\n                const token = localStorage.getItem(\"token\");\n                const headers = {\n                  headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Token \".concat(token)\n                  }\n                };\n                axios.delete(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/posts/\").concat(objectID), headers).then(res => {\n                  console.log(res);\n                  axios.delete(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/users/myPosts/\").concat(userID, \"?postID=\").concat(objectID), headers).then(res => {\n                    console.log(\"removed my posts successfully: \" + res);\n                  }).catch(err => {\n                    console.log(err);\n                  });\n                  var newMyPosts = myPosts.filter(myPost => myPost != objectID);\n                  this.props.handleMyPosts(newMyPosts);\n                }).catch(err => {\n                  console.log(err);\n                });\n              }\n            }, {\n              label: 'No',\n              onClick: () => {\n                console.log(objectID);\n              }\n            }]\n          });\n          e.preventDefault();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"icon is-small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-times\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(\"a\", {\n        className: \"level-item\",\n        \"aria-label\": \"cancel\",\n        onClick: e => {\n          this.props.handleCancelClick(e, title);\n          this.handleDelete(e, objectID);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"icon is-small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-times\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })));\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          title = _this$props2.title,\n          views = _this$props2.views,\n          answers = _this$props2.answers,\n          img = _this$props2.img,\n          objectID = _this$props2.objectID;\n    const openComment = this.state.openComment;\n    return React.createElement(\"div\", {\n      className: \"box\",\n      style: {\n        marginBottom: \"0.5rem\",\n        padding: \"0.8rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/blog/\".concat(objectID),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"media\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media-left\",\n      onClick: e => this.handleStopPropagation(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      className: \"image is-64x64\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: img,\n      alt: \"Image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"media-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"level is-mobile\",\n      style: {\n        float: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"level-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"level-item\",\n      \"aria-label\": \"comment\",\n      onClick: e => this.handleComment(e),\n      style: {\n        marginRight: \"0.25rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"icon is-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }))), this.deleteControl())), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      style: {\n        float: \"left\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, this.createTagGroup()), React.createElement(\"p\", {\n      style: {\n        float: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, views, \" Views\"), this.spaceDividor(), React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, answers, \" Answers\"))))))), React.createElement(Modal, {\n      open: openComment,\n      onClose: e => this.handleComment(e),\n      center: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"media\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      className: \"media-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"image is-64x64\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://versions.bulma.io/0.7.0/images/placeholders/128x128.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"media-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      className: \"textarea\",\n      placeholder: \"Add a comment...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }))), React.createElement(\"nav\", {\n      className: \"level\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"level-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"level-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"button is-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"Submit\"))), React.createElement(\"div\", {\n      className: \"level-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"level-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), \" Press enter to submit\"))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userID: state.persistedReducer.userID,\n    likedPosts: state.persistedReducer.likedPosts,\n    myPosts: state.persistedReducer.myPosts\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleLike: (id, liked) => dispatch({\n      type: \"HANDLELIKE\",\n      id: id,\n      liked: liked\n    }),\n    handleMyPosts: newMyPosts => dispatch({\n      type: \"PUBLISHEDNEWPOST\",\n      myPosts: newMyPosts\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SimplifiedPost);","map":{"version":3,"sources":["/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/userProfile/userProfileComponent/simplifiedPost.jsx"],"names":["React","Modal","axios","connect","Link","confirmAlert","SimplifiedPost","Component","constructor","props","state","openComment","handleComment","bind","handleStopPropagation","spaceDividor","margin","display","createTagGroup","tagNames","map","tagName","e","setState","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","handleDelete","objectID","token","localStorage","getItem","headers","Authorization","withCredentials","liked","likedPosts","includes","delete","process","env","REACT_APP_BACKEND_SERVER","userID","patch","then","res","handleLike","catch","err","deleteControl","title","PostType","myPosts","message","buttons","label","onClick","console","log","newMyPosts","filter","myPost","handleMyPosts","handleCancelClick","render","views","answers","img","marginBottom","padding","float","marginRight","mapStateToProps","persistedReducer","mapDispatchToProps","dispatch","id","type"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Modal from \"react-responsive-modal\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { confirmAlert } from \"react-custom-confirm-alert\";\nimport 'react-custom-confirm-alert/src/react-confirm-alert.css'\n\nclass SimplifiedPost extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openComment: false,\n    };\n    this.handleComment = this.handleComment.bind(this);\n    this.handleStopPropagation = this.handleStopPropagation.bind(this);\n  }\n\n  spaceDividor() {\n    return <div style={{ margin: \"5px\", display: \"inline-block\" }} />;\n  }\n\n  createTagGroup() {\n    const { tagNames } = this.props;\n    return (\n      <React.Fragment>\n        {tagNames.map(tagName => (\n          <React.Fragment>\n            <a className=\"button is-primary is-small\">\n              <span>{tagName}</span>\n            </a>\n            {this.spaceDividor()}\n          </React.Fragment>\n        ))}\n      </React.Fragment>\n    );\n  }\n\n  handleComment(e) {\n    this.setState({ openComment: !this.state.openComment });\n    e.preventDefault();\n  }\n\n  handleStopPropagation(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  handleDelete(e, objectID) {\n    const token = localStorage.getItem(\"token\");\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${token}`,\n        withCredentials: true\n      }\n    };\n\n    const liked = this.props.likedPosts.includes(objectID);\n\n    axios.delete(\n      `${process.env.REACT_APP_BACKEND_SERVER}/api/users/likes/${\n      this.props.userID\n      }?postID=${objectID}`,\n      headers\n    );\n\n    axios\n      .patch(\n        `${process.env.REACT_APP_BACKEND_SERVER}/api/posts/likes/${objectID}`,\n        { liked: liked },\n        headers\n      )\n      .then(res => {\n        this.props.handleLike(objectID, liked);\n      })\n      .catch(err => err);\n  }\n\n  deleteControl() {\n    const { title, objectID, PostType, userID, myPosts } = this.props;\n    if (PostType === \"MyPosts\") {\n      return (\n        <a className=\"level-item\"\n          aria-label=\"cancel\"\n          onClick={(e) => {\n            confirmAlert({\n              message: 'Your post will be deleted permanently, are you sure to do this?',\n              buttons: [\n                {\n                  label: 'Yes',\n                  onClick: () => {\n                    const token = localStorage.getItem(\"token\");\n                    const headers = {\n                      headers: {\n                        \"Content-Type\": \"application/json\",\n                        Authorization: `Token ${token}`\n                      }\n                    };\n\n                    axios\n                      .delete(\n                        `${process.env.REACT_APP_BACKEND_SERVER}/api/posts/${\n                        objectID\n                        }`,\n                        headers\n                      )\n                      .then(res => {\n                        console.log(res);\n                        axios\n                          .delete(\n                            `${process.env.REACT_APP_BACKEND_SERVER}/api/users/myPosts/${\n                            userID\n                            }?postID=${objectID}`,\n                            headers\n                          )\n                          .then(res => {\n                            console.log(\"removed my posts successfully: \" + res);\n                          })\n                          .catch(err => {\n                            console.log(err);\n                          });\n                        var newMyPosts = myPosts.filter(myPost => myPost != objectID);\n                        this.props.handleMyPosts(newMyPosts);\n                      })\n                      .catch(err => {\n                        console.log(err);\n                      });\n                  }\n                },\n                {\n                  label: 'No',\n                  onClick: () => {\n                    console.log(objectID);\n                  }\n                }\n              ]\n            });\n            e.preventDefault();\n          }}\n        >\n\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-times\" />\n          </span>\n        </a>\n      );\n    } else {\n      return (\n        <a\n          className=\"level-item\"\n          aria-label=\"cancel\"\n          onClick={e => {\n            this.props.handleCancelClick(e, title);\n            this.handleDelete(e, objectID);\n          }}\n        >\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-times\" />\n          </span>\n        </a>\n      );\n    }\n  }\n\n  render() {\n    const { title, views, answers, img, objectID } = this.props;\n    const { openComment } = this.state;\n    return (\n      <div className=\"box\" style={{ marginBottom: \"0.5rem\", padding: \"0.8rem\" }}>\n        <Link to={`/blog/${objectID}`}>\n          <article className=\"media\">\n            <div\n              className=\"media-left\"\n              onClick={e => this.handleStopPropagation(e)}\n            >\n              <figure className=\"image is-64x64\">\n                <img src={img} alt=\"Image\" />\n              </figure>\n            </div>\n            <div className=\"media-content\">\n              <div className=\"content\">\n                <nav className=\"level is-mobile\" style={{ float: \"right\" }}>\n                  <div className=\"level-left\">\n                    <a\n                      className=\"level-item\"\n                      aria-label=\"comment\"\n                      onClick={e => this.handleComment(e)}\n                      style={{ marginRight: \"0.25rem\" }}\n                    >\n                      <span className=\"icon is-small\">\n                        <i className=\"fas fa-comment\" />\n                      </span>\n                    </a>\n                    {this.deleteControl()}\n                  </div>\n                </nav>\n                <p>\n                  <h3>{title}</h3>\n                  <div style={{ float: \"left\" }}>{this.createTagGroup()}</div>\n                  <p style={{ float: \"right\" }}>\n                    <small>{views} Views</small>\n                    {this.spaceDividor()}\n                    <small>{answers} Answers</small>\n                  </p>\n                </p>\n              </div>\n            </div>\n          </article>\n        </Link>\n        <Modal open={openComment} onClose={e => this.handleComment(e)} center>\n          <article className=\"media\">\n            <figure className=\"media-left\">\n              <p className=\"image is-64x64\">\n                <img src=\"https://versions.bulma.io/0.7.0/images/placeholders/128x128.png\" />\n              </p>\n            </figure>\n            <div className=\"media-content\">\n              <div className=\"field\">\n                <p className=\"control\">\n                  <textarea className=\"textarea\" placeholder=\"Add a comment...\" />\n                </p>\n              </div>\n              <nav className=\"level\">\n                <div className=\"level-left\">\n                  <div className=\"level-item\">\n                    <a className=\"button is-info\">Submit</a>\n                  </div>\n                </div>\n                <div className=\"level-right\">\n                  <div className=\"level-item\">\n                    <label className=\"checkbox\">\n                      <input type=\"checkbox\" /> Press enter to submit\n                    </label>\n                  </div>\n                </div>\n              </nav>\n            </div>\n          </article>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userID: state.persistedReducer.userID,\n    likedPosts: state.persistedReducer.likedPosts,\n    myPosts: state.persistedReducer.myPosts\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleLike: (id, liked) =>\n      dispatch({ type: \"HANDLELIKE\", id: id, liked: liked }),\n    handleMyPosts: newMyPosts =>\n      dispatch({\n        type: \"PUBLISHEDNEWPOST\",\n        myPosts: newMyPosts\n      })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SimplifiedPost);\n"]},"metadata":{},"sourceType":"module"}