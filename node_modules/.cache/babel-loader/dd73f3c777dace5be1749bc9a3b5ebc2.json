{"ast":null,"code":"var _jsxFileName = \"/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/Blog.jsx\";\nimport React, { Component } from \"react\";\nimport Navbar from \"./navbar\";\nimport ReactHtmlParser from \"react-html-parser\";\nimport Comments from \"./comment/comments\";\nimport { connect } from \"react-redux\";\nimport axios from \"../axios-blogs\";\nimport withHandler from \"./UI/ErrorHandler/ErrorHandler\";\nimport Share from './share/share';\n\nclass Blog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      axios.get(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/posts/\").concat(this.props.match.params.id)).then(res => {\n        console.log(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/posts/\").concat(this.props.match.params.id));\n        const date = new Date(res.data.post_date_timestamp);\n        this.setState({\n          comments: res.data.comments,\n          post_date: \"\".concat(date.getMonth() + 1, \"-\").concat(date.getDate(), \"-\").concat(date.getFullYear()),\n          username: res.data.username,\n          userID: res.data.userID,\n          content: res.data.content,\n          title: res.data.title,\n          pageID: this.props.match.params.id\n        });\n        this.props.getBlog(res.data);\n      }).catch(err => console.log(err));\n    };\n\n    this.handleShare = () => {};\n\n    this.handleLike = type => {\n      const token = localStorage.getItem(\"token\");\n      const headers = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Token \".concat(token),\n          withCredentials: true\n        }\n      };\n      const liked = this.props.likedPosts.includes(this.props.match.params.id); //handling likeposts in User route\n\n      liked ? axios.delete(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/users/likes/\").concat(this.props.userID, \"?postID=\").concat(this.props.match.params.id), headers).then(res => console.log(\"delete\")) : axios.post(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/users/likes/\").concat(this.props.userID), {\n        postID: this.props.match.params.id\n      }, headers).then(res => console.log(\"post\")).catch(error => {\n        console.log(error);\n        console.log(error.message);\n      }); //handling like# in Post route\n      //catch here to revert the change\n\n      axios.patch(\"\".concat(process.env.REACT_APP_BACKEND_SERVER, \"/api/posts/likes/\").concat(this.props.match.params.id), {\n        liked: liked\n      }, headers).catch(() => {\n        this.props.handleLike(this.props.match.params.id, !liked);\n        console.log(\"catch\");\n      });\n      this.props.handleLike(this.props.match.params.id, liked);\n    };\n\n    this.state = {\n      saved: false,\n      shared: false,\n      post_date: \"\",\n      comments: [],\n      username: \"\",\n      userID: \"\",\n      content: \"\",\n      title: \"\",\n      pageID: \"\"\n    };\n    this.handleLike = this.handleLike.bind(this);\n  }\n\n  render() {\n    const liked = this.props.likedPosts.includes(this.props.match.params.id);\n    const saved = liked;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"hero is-info is-medium is-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"hero-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container has-text-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.state.title)))), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"articles\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"column is-10 is-offset-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card article \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"media-content has-text-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tags has-addons level-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"tag is-rounded is-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"DatePosted@\"), React.createElement(\"span\", {\n      className: \"tag is-rounded\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, this.state.post_date.slice(0, 10))))), React.createElement(\"div\", {\n      className: \"content article-body\",\n      style: {\n        marginBottom: \"10%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, ReactHtmlParser(this.state.content)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"level-left\",\n      style: {\n        justifyContent: \"space-between\",\n        width: \"80%\",\n        margin: \"3% auto 3% auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"level-item button \",\n      onClick: this.props.onSwitchShareModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"icon is-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"far fa-share-square\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      className: liked ? \"level-item button is-success\" : \"level-item button\",\n      \"aria-label\": \"like\",\n      onClick: () => this.handleLike(\"liked\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"icon is-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"far fa-thumbs-up\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    })))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    })), React.createElement(Comments, {\n      blogID: this.props.match.params.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }))))), React.createElement(Share, {\n      pageID: this.state.pageID,\n      title: this.state.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userID: state.persistedReducer.userID,\n    likedPosts: state.persistedReducer.likedPosts,\n    shareOpen: state.persistedReducer.shareOpen\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleLike: (id, liked) => dispatch({\n      type: \"HANDLELIKE\",\n      id: id,\n      liked: liked\n    }),\n    getBlog: blog => dispatch({\n      type: \"GETBLOG\",\n      blog: blog\n    }),\n    onSwitchShareModal: () => dispatch({\n      type: \"SHAREMODAL\"\n    })\n  };\n};\n\nexport default withHandler(connect(mapStateToProps, mapDispatchToProps)(Blog), axios);","map":{"version":3,"sources":["/Users/hantaoliu/Projects/Learning-Platform/techleak/client/src/components/Blog.jsx"],"names":["React","Component","Navbar","ReactHtmlParser","Comments","connect","axios","withHandler","Share","Blog","constructor","props","componentDidMount","get","process","env","REACT_APP_BACKEND_SERVER","match","params","id","then","res","console","log","date","Date","data","post_date_timestamp","setState","comments","post_date","getMonth","getDate","getFullYear","username","userID","content","title","pageID","getBlog","catch","err","handleShare","handleLike","type","token","localStorage","getItem","headers","Authorization","withCredentials","liked","likedPosts","includes","delete","post","postID","error","message","patch","state","saved","shared","bind","render","slice","marginBottom","justifyContent","width","margin","onSwitchShareModal","mapStateToProps","persistedReducer","shareOpen","mapDispatchToProps","dispatch","blog"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Navbar from \"./navbar\";\nimport ReactHtmlParser from \"react-html-parser\";\nimport Comments from \"./comment/comments\";\nimport { connect } from \"react-redux\";\nimport axios from \"../axios-blogs\";\nimport withHandler from \"./UI/ErrorHandler/ErrorHandler\";\nimport Share from './share/share'\n\nclass Blog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      saved: false,\n      shared: false,\n      post_date: \"\",\n      comments: [],\n      username: \"\",\n      userID: \"\",\n      content: \"\",\n      title: \"\",\n      pageID: \"\"\n    };\n\n    this.handleLike = this.handleLike.bind(this);\n  }\n\n  componentDidMount = () => {\n    axios\n      .get(\n        `${process.env.REACT_APP_BACKEND_SERVER}/api/posts/${\n          this.props.match.params.id\n        }`\n      )\n      .then(res => {\n        console.log(\n          `${process.env.REACT_APP_BACKEND_SERVER}/api/posts/${\n            this.props.match.params.id\n          }`\n        );\n        const date = new Date(res.data.post_date_timestamp);\n        this.setState({\n          comments: res.data.comments,\n          post_date: `${date.getMonth() +\n            1}-${date.getDate()}-${date.getFullYear()}`,\n          username: res.data.username,\n          userID: res.data.userID,\n          content: res.data.content,\n          title: res.data.title,\n          pageID: this.props.match.params.id\n        });\n        this.props.getBlog(res.data);\n      })\n      .catch(err => console.log(err));\n  };\n  \n  handleShare = () => {\n\n  }\n\n  handleLike = type => {\n    const token = localStorage.getItem(\"token\");\n    const headers = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${token}`,\n        withCredentials: true\n      }\n    };\n\n    const liked = this.props.likedPosts.includes(this.props.match.params.id);\n    //handling likeposts in User route\n    liked\n      ? axios\n          .delete(\n            `${process.env.REACT_APP_BACKEND_SERVER}/api/users/likes/${\n              this.props.userID\n            }?postID=${this.props.match.params.id}`,\n            headers\n          )\n          .then(res => console.log(\"delete\"))\n      : axios.post(\n          `${process.env.REACT_APP_BACKEND_SERVER}/api/users/likes/${\n            this.props.userID\n          }`,\n          { postID: this.props.match.params.id },\n          headers\n        )\n        .then(res => console.log(\"post\"))\n        .catch(error => {\n          console.log(error);\n          console.log(error.message);\n        })\n\n    //handling like# in Post route\n    //catch here to revert the change\n    axios\n      .patch(\n        `${process.env.REACT_APP_BACKEND_SERVER}/api/posts/likes/${\n          this.props.match.params.id\n        }`,\n        { liked: liked },\n        headers\n      )\n      .catch(() => {this.props.handleLike(this.props.match.params.id, !liked);\n                    console.log(\"catch\")});\n\n    this.props.handleLike(this.props.match.params.id, liked);\n  };\n\n  render() {\n    const liked = this.props.likedPosts.includes(this.props.match.params.id);\n    const saved = liked;\n    return (\n      <React.Fragment>\n        <Navbar />\n\n        <section className=\"hero is-info is-medium is-bold\">\n          <div className=\"hero-body\">\n            <div className=\"container has-text-centered\">\n              <h1 className=\"title\">{this.state.title}</h1>\n            </div>\n          </div>\n        </section>\n\n        <div className=\"container\">\n          <section className=\"articles\">\n            <div className=\"column is-10 is-offset-1\">\n              <div className=\"card article \">\n                <div className=\"card-content\">\n                  <div className=\"media\">\n                    <div className=\"media-content has-text-centered\">\n                      <div className=\"tags has-addons level-item\">\n                        <span className=\"tag is-rounded is-info\">\n                          DatePosted@\n                        </span>\n                        <span className=\"tag is-rounded\">\n                          {this.state.post_date.slice(0, 10)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div\n                    className=\"content article-body\"\n                    style={{ marginBottom: \"10%\" }}\n                  >\n                    {ReactHtmlParser(this.state.content)}\n                  </div>\n                  <hr />\n\n                  <div\n                    className=\"level-left\"\n                    style={{\n                      justifyContent: \"space-between\",\n                      width: \"80%\",\n                      margin: \"3% auto 3% auto\"\n                    }}\n                  >\n                    <button\n                      className=\"level-item button \"\n                      onClick={this.props.onSwitchShareModal}\n                    >\n                      <span className=\"icon is-small\">\n                        <i className=\"far fa-share-square\" aria-hidden=\"true\" />\n                      </span>\n                    </button>\n\n                    <button\n                      className={\n                        liked\n                          ? \"level-item button is-success\"\n                          : \"level-item button\"\n                      }\n                      aria-label=\"like\"\n                      onClick={() => this.handleLike(\"liked\")}\n                    >\n                      <span className=\"icon is-small\">\n                        <i className=\"far fa-thumbs-up\" aria-hidden=\"true\" />\n                      </span>\n                    </button>\n                  </div>\n                  <hr />\n                </div>\n                <Comments blogID={this.props.match.params.id} />\n              </div>\n            </div>\n          </section>\n        </div>\n        <Share pageID={this.state.pageID} title={this.state.title} />\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userID: state.persistedReducer.userID,\n    likedPosts: state.persistedReducer.likedPosts,\n    shareOpen: state.persistedReducer.shareOpen\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleLike: (id, liked) =>\n      dispatch({ type: \"HANDLELIKE\", id: id, liked: liked }),\n    getBlog: blog => dispatch({ type: \"GETBLOG\", blog: blog }),\n    onSwitchShareModal: () => dispatch({ type: \"SHAREMODAL\" })\n  };\n};\n\nexport default withHandler(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Blog),\n  axios\n);\n"]},"metadata":{},"sourceType":"module"}