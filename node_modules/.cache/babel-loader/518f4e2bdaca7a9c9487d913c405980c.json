{"ast":null,"code":"/*!\n * froala_editor v3.0.0-rc.1 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2019 Froala Labs\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(require(\"froala-editor\")) : \"function\" == typeof define && define.amd ? define([\"froala-editor\"], t) : t(e.FroalaEditor);\n}(this, function (Q) {\n  \"use strict\";\n\n  Q = Q && Q.hasOwnProperty(\"default\") ? Q[\"default\"] : Q, Object.assign(Q.POPUP_TEMPLATES, {\n    \"video.insert\": \"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]\",\n    \"video.edit\": \"[_BUTTONS_]\",\n    \"video.size\": \"[_BUTTONS_][_SIZE_LAYER_]\"\n  }), Object.assign(Q.DEFAULTS, {\n    videoAllowedTypes: [\"mp4\", \"webm\", \"ogg\"],\n    videoAllowedProviders: [\".*\"],\n    videoDefaultAlign: \"center\",\n    videoDefaultDisplay: \"block\",\n    videoDefaultWidth: 600,\n    videoEditButtons: [\"videoReplace\", \"videoRemove\", \"videoDisplay\", \"videoAlign\", \"videoSize\"],\n    videoInsertButtons: [\"videoBack\", \"|\", \"videoByURL\", \"videoEmbed\", \"videoUpload\"],\n    videoMaxSize: 52428800,\n    videoMove: !0,\n    videoResize: !0,\n    videoResponsive: !1,\n    videoSizeButtons: [\"videoBack\", \"|\"],\n    videoSplitHTML: !1,\n    videoTextNear: !0,\n    videoUpload: !0,\n    videoUploadMethod: \"POST\",\n    videoUploadParam: \"file\",\n    videoUploadParams: {},\n    videoUploadToS3: !1,\n    videoUploadURL: null\n  }), Q.VIDEO_PROVIDERS = [{\n    test_regex: /^.*((youtu.be)|(youtube.com))\\/((v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))?\\??v?=?([^#\\&\\?]*).*/,\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=|embed\\/)?([0-9a-zA-Z_\\-]+)(.+)?/g,\n    url_text: \"https://www.youtube.com/embed/$1?$2\",\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}&wmode=opaque\" frameborder=\"0\" allowfullscreen></iframe>',\n    provider: \"youtube\"\n  }, {\n    test_regex: /^.*(?:vimeo.com)\\/(?:channels(\\/\\w+\\/)?|groups\\/*\\/videos\\/\\u200b\\d+\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/,\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?(\\/[a-zA-Z0-9_\\-]+)?/i,\n    url_text: \"https://player.vimeo.com/video/$1\",\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\n    provider: \"vimeo\"\n  }, {\n    test_regex: /^.+(dailymotion.com|dai.ly)\\/(video|hub)?\\/?([^_]+)[^#]*(#video=([^_&]+))?/,\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:dailymotion\\.com|dai\\.ly)\\/(?:video|hub)?\\/?(.+)/g,\n    url_text: \"https://www.dailymotion.com/embed/video/$1\",\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\n    provider: \"dailymotion\"\n  }, {\n    test_regex: /^.+(screen.yahoo.com)\\/[^_&]+/,\n    url_regex: \"\",\n    url_text: \"\",\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}?format=embed\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\n    provider: \"yahoo\"\n  }, {\n    test_regex: /^.+(rutube.ru)\\/[^_&]+/,\n    url_regex: /(?:https?:\\/\\/)?(?:www\\.)?(?:rutube\\.ru)\\/(?:video)?\\/?(.+)/g,\n    url_text: \"https://rutube.ru/play/embed/$1\",\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allowtransparency=\"true\"></iframe>',\n    provider: \"rutube\"\n  }, {\n    test_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/,\n    url_regex: /^(?:.+)vidyard.com\\/(?:watch)?\\/?([^.&/]+)\\/?(?:[^_.&]+)?/g,\n    url_text: \"https://play.vidyard.com/$1\",\n    html: '<iframe width=\"640\" height=\"360\" src=\"{url}\" frameborder=\"0\" allowfullscreen></iframe>',\n    provider: \"vidyard\"\n  }], Q.VIDEO_EMBED_REGEX = /^\\W*((<iframe(.|\\n)*>(\\s|\\n)*<\\/iframe>)|(<embed(.|\\n)*>))\\W*$/i, Q.PLUGINS.video = function (p) {\n    var a,\n        f,\n        v,\n        u,\n        o,\n        i,\n        c = p.$,\n        d = \"https://i.froala.com/upload\",\n        l = 2,\n        h = 3,\n        g = 4,\n        m = 5,\n        b = 6,\n        r = {};\n\n    function y() {\n      var e = p.popups.get(\"video.insert\");\n      e.find(\".fr-video-by-url-layer input\").val(\"\").trigger(\"change\");\n      var t = e.find(\".fr-video-embed-layer textarea\");\n      t.val(\"\").trigger(\"change\"), (t = e.find(\".fr-video-upload-layer input\")).val(\"\").trigger(\"change\");\n    }\n\n    function s() {\n      var e = p.popups.get(\"video.edit\");\n\n      if (e || (e = function () {\n        var e = \"\";\n\n        if (0 < p.opts.videoEditButtons.length) {\n          p.opts.videoResponsive && (p.opts.videoEditButtons.splice(p.opts.videoEditButtons.indexOf(\"videoSize\"), 1), p.opts.videoEditButtons.splice(p.opts.videoEditButtons.indexOf(\"videoDisplay\"), 1), p.opts.videoEditButtons.splice(p.opts.videoEditButtons.indexOf(\"videoAlign\"), 1));\n          var t = {\n            buttons: e += '<div class=\"fr-buttons\"> \\n      '.concat(p.button.buildList(p.opts.videoEditButtons), \" \\n      </div>\")\n          },\n              i = p.popups.create(\"video.edit\", t);\n          return p.events.$on(p.$wp, \"scroll.video-edit\", function () {\n            u && p.popups.isVisible(\"video.edit\") && (p.events.disableBlur(), x(u));\n          }), i;\n        }\n\n        return !1;\n      }()), e) {\n        p.popups.setContainer(\"video.edit\", p.$sc), p.popups.refresh(\"video.edit\");\n        var t = u.find(\"iframe, embed, video\"),\n            i = t.offset().left + t.outerWidth() / 2,\n            o = t.offset().top + t.outerHeight();\n        p.popups.show(\"video.edit\", i, o, t.outerHeight(), !0);\n      }\n    }\n\n    function n(e) {\n      if (e) return p.popups.onRefresh(\"video.insert\", y), p.popups.onHide(\"video.insert\", j), !0;\n      var t = \"\";\n      p.opts.videoUpload || -1 === p.opts.videoInsertButtons.indexOf(\"videoUpload\") || p.opts.videoInsertButtons.splice(p.opts.videoInsertButtons.indexOf(\"videoUpload\"), 1);\n      var i = p.button.buildList(p.opts.videoInsertButtons);\n      \"\" !== i && (t = '<div class=\"fr-buttons\">' + i + \"</div>\");\n      var o,\n          r = \"\",\n          s = p.opts.videoInsertButtons.indexOf(\"videoUpload\"),\n          n = p.opts.videoInsertButtons.indexOf(\"videoByURL\"),\n          a = p.opts.videoInsertButtons.indexOf(\"videoEmbed\");\n      0 <= n && (o = \" fr-active\", (s < n && 0 <= s || a < n && 0 <= a) && (o = \"\"), r = '<div class=\"fr-video-by-url-layer fr-layer' + o + '\" id=\"fr-video-by-url-layer-' + p.id + '\"><div class=\"fr-input-line\"><input id=\"fr-video-by-url-layer-text-' + p.id + '\" type=\"text\" placeholder=\"' + p.language.translate(\"Paste in a video URL\") + '\" tabIndex=\"1\" aria-required=\"true\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertByURL\" tabIndex=\"2\" role=\"button\">' + p.language.translate(\"Insert\") + \"</button></div></div>\");\n      var d = \"\";\n      0 <= a && (o = \" fr-active\", (s < a && 0 <= s || n < a && 0 <= n) && (o = \"\"), d = '<div class=\"fr-video-embed-layer fr-layer' + o + '\" id=\"fr-video-embed-layer-' + p.id + '\"><div class=\"fr-input-line\"><textarea id=\"fr-video-embed-layer-text' + p.id + '\" type=\"text\" placeholder=\"' + p.language.translate(\"Embedded Code\") + '\" tabIndex=\"1\" aria-required=\"true\" rows=\"5\"></textarea></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoInsertEmbed\" tabIndex=\"2\" role=\"button\">' + p.language.translate(\"Insert\") + \"</button></div></div>\");\n      var l = \"\";\n      0 <= s && (o = \" fr-active\", (a < s && 0 <= a || n < s && 0 <= n) && (o = \"\"), l = '<div class=\"fr-video-upload-layer fr-layer' + o + '\" id=\"fr-video-upload-layer-' + p.id + '\"><strong>' + p.language.translate(\"Drop video\") + \"</strong><br>(\" + p.language.translate(\"or click\") + ')<div class=\"fr-form\"><input type=\"file\" accept=\"video/' + p.opts.videoAllowedTypes.join(\", video/\").toLowerCase() + '\" tabIndex=\"-1\" aria-labelledby=\"fr-video-upload-layer-' + p.id + '\" role=\"button\"></div></div>');\n      var f = {\n        buttons: t,\n        by_url_layer: r,\n        embed_layer: d,\n        upload_layer: l,\n        progress_bar: '<div class=\"fr-video-progress-bar-layer fr-layer\"><h3 tabIndex=\"-1\" class=\"fr-message\">Uploading</h3><div class=\"fr-loader\"><span class=\"fr-progress\"></span></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-dismiss\" data-cmd=\"videoDismissError\" tabIndex=\"2\" role=\"button\">OK</button></div></div>'\n      },\n          v = p.popups.create(\"video.insert\", f);\n      return function (o) {\n        p.events.$on(o, \"dragover dragenter\", \".fr-video-upload-layer\", function () {\n          return c(this).addClass(\"fr-drop\"), !1;\n        }, !0), p.events.$on(o, \"dragleave dragend\", \".fr-video-upload-layer\", function () {\n          return c(this).removeClass(\"fr-drop\"), !1;\n        }, !0), p.events.$on(o, \"drop\", \".fr-video-upload-layer\", function (e) {\n          e.preventDefault(), e.stopPropagation(), c(this).removeClass(\"fr-drop\");\n          var t = e.originalEvent.dataTransfer;\n\n          if (t && t.files) {\n            var i = o.data(\"instance\") || p;\n            i.events.disableBlur(), i.video.upload(t.files), i.events.enableBlur();\n          }\n        }, !0), p.helpers.isIOS() && p.events.$on(o, \"touchstart\", '.fr-video-upload-layer input[type=\"file\"]', function () {\n          c(this).trigger(\"click\");\n        }, !0);\n        p.events.$on(o, \"change\", '.fr-video-upload-layer input[type=\"file\"]', function () {\n          if (this.files) {\n            var e = o.data(\"instance\") || p;\n            e.events.disableBlur(), o.find(\"input:focus\").blur(), e.events.enableBlur(), e.video.upload(this.files);\n          }\n\n          c(this).val(\"\");\n        }, !0);\n      }(v), v;\n    }\n\n    function w(e) {\n      p.events.focus(!0), p.selection.restore();\n      var t = !1;\n      u && (W(), t = !0), p.html.insert('<span contenteditable=\"false\" draggable=\"true\" class=\"fr-jiv fr-video\">' + e + \"</span>\", !1, p.opts.videoSplitHTML), p.popups.hide(\"video.insert\");\n      var i = p.$el.find(\".fr-jiv\");\n      i.removeClass(\"fr-jiv\"), i.toggleClass(\"fr-rv\", p.opts.videoResponsive), q(i, p.opts.videoDefaultDisplay, p.opts.videoDefaultAlign), i.toggleClass(\"fr-draggable\", p.opts.videoMove), p.events.trigger(t ? \"video.replaced\" : \"video.inserted\", [i]);\n    }\n\n    function E() {\n      var e = c(this);\n      p.popups.hide(\"video.insert\"), e.removeClass(\"fr-uploading\"), e.parent().next().is(\"br\") && e.parent().next().remove(), x(e.parent()), p.events.trigger(\"video.loaded\", [e.parent()]);\n    }\n\n    function C(a, e, d, l, f) {\n      p.edit.off(), A(\"Loading video\"), e && (a = p.helpers.sanitizeURL(a));\n      _(\"Loading video\"), function () {\n        var e, t;\n\n        if (l) {\n          p.undo.canDo() || l.find(\"video\").hasClass(\"fr-uploading\") || p.undo.saveStep();\n          var i = l.find(\"video\").data(\"fr-old-src\"),\n              o = l.data(\"fr-replaced\");\n          l.data(\"fr-replaced\", !1), p.$wp ? ((e = l.clone(!0)).find(\"video\").removeData(\"fr-old-src\").removeClass(\"fr-uploading\"), e.find(\"video\").off(\"canplay\"), i && l.find(\"video\").attr(\"src\", i), l.replaceWith(e)) : e = l;\n\n          for (var r = e.find(\"video\").get(0).attributes, s = 0; s < r.length; s++) {\n            var n = r[s];\n            0 === n.nodeName.indexOf(\"data-\") && e.find(\"video\").removeAttr(n.nodeName);\n          }\n\n          if (void 0 !== d) for (t in d) {\n            d.hasOwnProperty(t) && \"link\" != t && e.find(\"video\").attr(\"data-\" + t, d[t]);\n          }\n          e.find(\"video\").on(\"canplay\", E), e.find(\"video\").attr(\"src\", a), p.edit.on(), z(), p.undo.saveStep(), p.$el.blur(), p.events.trigger(o ? \"video.replaced\" : \"video.inserted\", [e, f]);\n        } else e = function (e, t, i) {\n          var o,\n              r = \"\";\n          if (t && void 0 !== t) for (o in t) {\n            t.hasOwnProperty(o) && \"link\" != o && (r += \" data-\" + o + '=\"' + t[o] + '\"');\n          }\n          var s = p.opts.videoDefaultWidth;\n          s && \"auto\" != s && (s += \"px\");\n          var n = c(document.createElement(\"span\")).attr(\"contenteditable\", \"false\").attr(\"draggable\", \"true\").attr(\"class\", \"fr-video fr-dv\" + p.opts.videoDefaultDisplay[0] + (\"center\" != p.opts.videoDefaultAlign ? \" fr-fv\" + p.opts.videoDefaultAlign[0] : \"\")).html('<video src=\"' + e + '\" ' + r + (s ? ' style=\"width: ' + s + ';\" ' : \"\") + \" controls>\" + p.language.translate(\"Your browser does not support HTML5 video.\") + \"</video>\");\n          n.toggleClass(\"fr-draggable\", p.opts.videoMove), p.edit.on(), p.events.focus(!0), p.selection.restore(), p.undo.saveStep(), p.opts.videoSplitHTML ? p.markers.split() : p.markers.insert(), p.html.wrap();\n          var a = p.$el.find(\".fr-marker\");\n          return p.node.isLastSibling(a) && a.parent().hasClass(\"fr-deletable\") && a.insertAfter(a.parent()), a.replaceWith(n), p.selection.clear(), n.find(\"video\").get(0).readyState > n.find(\"video\").get(0).HAVE_FUTURE_DATA || p.helpers.isIOS() ? i.call(n.find(\"video\").get(0)) : n.find(\"video\").on(\"canplaythrough load\", i), n;\n        }(a, d, E), z(), p.undo.saveStep(), p.events.trigger(\"video.inserted\", [e, f]);\n      }();\n    }\n\n    function _(e) {\n      var t = p.popups.get(\"video.insert\");\n\n      if (t || (t = n()), t.find(\".fr-layer.fr-active\").removeClass(\"fr-active\").addClass(\"fr-pactive\"), t.find(\".fr-video-progress-bar-layer\").addClass(\"fr-active\"), t.find(\".fr-buttons\").hide(), u) {\n        var i = u.find(\"video\");\n        p.popups.setContainer(\"video.insert\", p.$sc);\n        var o = i.offset().left,\n            r = i.offset().top + i.height();\n        p.popups.show(\"video.insert\", o, r, i.outerHeight());\n      }\n\n      void 0 === e && A(p.language.translate(\"Uploading\"), 0);\n    }\n\n    function S(e) {\n      var t = p.popups.get(\"video.insert\");\n\n      if (t && (t.find(\".fr-layer.fr-pactive\").addClass(\"fr-active\").removeClass(\"fr-pactive\"), t.find(\".fr-video-progress-bar-layer\").removeClass(\"fr-active\"), t.find(\".fr-buttons\").show(), e || p.$el.find(\"video.fr-error\").length)) {\n        if (p.events.focus(), p.$el.find(\"video.fr-error\").length && (p.$el.find(\"video.fr-error\").parent().remove(), p.undo.saveStep(), p.undo.run(), p.undo.dropRedo()), !p.$wp && u) {\n          var i = u;\n          M(!0), p.selection.setAfter(i.find(\"video\").get(0)), p.selection.restore();\n        }\n\n        p.popups.hide(\"video.insert\");\n      }\n    }\n\n    function A(e, t) {\n      var i = p.popups.get(\"video.insert\");\n\n      if (i) {\n        var o = i.find(\".fr-video-progress-bar-layer\");\n        o.find(\"h3\").text(e + (t ? \" \" + t + \"%\" : \"\")), o.removeClass(\"fr-error\"), t ? (o.find(\"div\").removeClass(\"fr-indeterminate\"), o.find(\"div > span\").css(\"width\", t + \"%\")) : o.find(\"div\").addClass(\"fr-indeterminate\");\n      }\n    }\n\n    function R(e) {\n      _();\n\n      var t = p.popups.get(\"video.insert\").find(\".fr-video-progress-bar-layer\");\n      t.addClass(\"fr-error\");\n      var i = t.find(\"h3\");\n      i.text(e), p.events.disableBlur(), i.focus();\n    }\n\n    function x(e) {\n      t.call(e.get(0));\n    }\n\n    function D(e) {\n      A(\"Loading video\");\n      var t = this.status,\n          i = this.response,\n          o = this.responseXML,\n          r = this.responseText;\n\n      try {\n        if (p.opts.videoUploadToS3) {\n          if (201 == t) {\n            var s = function (e) {\n              try {\n                var t = c(e).find(\"Location\").text(),\n                    i = c(e).find(\"Key\").text();\n                return !1 === p.events.trigger(\"video.uploadedToS3\", [t, i, e], !0) ? (p.edit.on(), !1) : t;\n              } catch (o) {\n                return K(g, e), !1;\n              }\n            }(o);\n\n            s && C(s, !1, [], e, i || o);\n          } else K(g, i || o);\n        } else if (200 <= t && t < 300) {\n          var n = function (e) {\n            try {\n              if (!1 === p.events.trigger(\"video.uploaded\", [e], !0)) return p.edit.on(), !1;\n              var t = JSON.parse(e);\n              return t.link ? t : (K(l, e), !1);\n            } catch (i) {\n              return K(g, e), !1;\n            }\n          }(r);\n\n          n && C(n.link, !1, n, e, i || r);\n        } else K(h, i || r);\n      } catch (a) {\n        K(g, i || r);\n      }\n    }\n\n    function U() {\n      K(g, this.response || this.responseText || this.responseXML);\n    }\n\n    function B(e) {\n      if (e.lengthComputable) {\n        var t = e.loaded / e.total * 100 | 0;\n        A(p.language.translate(\"Uploading\"), t);\n      }\n    }\n\n    function $() {\n      p.edit.on(), S(!0);\n    }\n\n    function I(e) {\n      if (!p.core.sameInstance(v)) return !0;\n      e.preventDefault(), e.stopPropagation();\n      var t = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null),\n          i = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null);\n      if (!t || !i) return !1;\n\n      if (\"mousedown\" == e.type) {\n        var o = p.$oel.get(0).ownerDocument,\n            r = o.defaultView || o.parentWindow,\n            s = !1;\n\n        try {\n          s = r.location != r.parent.location && !(r.$ && r.$.FE);\n        } catch (n) {}\n\n        s && r.frameElement && (t += p.helpers.getPX(c(r.frameElement).offset().left) + r.frameElement.clientLeft, i = e.clientY + p.helpers.getPX(c(r.frameElement).offset().top) + r.frameElement.clientTop);\n      }\n\n      p.undo.canDo() || p.undo.saveStep(), (f = c(this)).data(\"start-x\", t), f.data(\"start-y\", i), a.show(), p.popups.hideAll(), V();\n    }\n\n    function k(e) {\n      if (!p.core.sameInstance(v)) return !0;\n\n      if (f) {\n        e.preventDefault();\n        var t = e.pageX || (e.originalEvent.touches ? e.originalEvent.touches[0].pageX : null),\n            i = e.pageY || (e.originalEvent.touches ? e.originalEvent.touches[0].pageY : null);\n        if (!t || !i) return !1;\n        var o = f.data(\"start-x\"),\n            r = f.data(\"start-y\");\n        f.data(\"start-x\", t), f.data(\"start-y\", i);\n        var s = t - o,\n            n = i - r,\n            a = u.find(\"iframe, embed, video\"),\n            d = a.width(),\n            l = a.height();\n        (f.hasClass(\"fr-hnw\") || f.hasClass(\"fr-hsw\")) && (s = 0 - s), (f.hasClass(\"fr-hnw\") || f.hasClass(\"fr-hne\")) && (n = 0 - n), a.css(\"width\", d + s), a.css(\"height\", l + n), a.removeAttr(\"width\"), a.removeAttr(\"height\"), T();\n      }\n    }\n\n    function O(e) {\n      if (!p.core.sameInstance(v)) return !0;\n      f && u && (e && e.stopPropagation(), f = null, a.hide(), T(), s(), p.undo.saveStep());\n    }\n\n    function L(e) {\n      return '<div class=\"fr-handler fr-h' + e + '\"></div>';\n    }\n\n    function P(e, t, i, o) {\n      return e.pageX = t, e.pageY = t, I.call(this, e), e.pageX = e.pageX + i * Math.floor(Math.pow(1.1, o)), e.pageY = e.pageY + i * Math.floor(Math.pow(1.1, o)), k.call(this, e), O.call(this, e), ++o;\n    }\n\n    function z() {\n      var e,\n          t = Array.prototype.slice.call(p.el.querySelectorAll(\"video, .fr-video > *\")),\n          i = [];\n\n      for (e = 0; e < t.length; e++) {\n        i.push(t[e].getAttribute(\"src\")), c(t[e]).toggleClass(\"fr-draggable\", p.opts.videoMove), \"\" === t[e].getAttribute(\"class\") && t[e].removeAttribute(\"class\"), \"\" === t[e].getAttribute(\"style\") && t[e].removeAttribute(\"style\");\n      }\n\n      if (o) for (e = 0; e < o.length; e++) {\n        i.indexOf(o[e].getAttribute(\"src\")) < 0 && p.events.trigger(\"video.removed\", [c(o[e])]);\n      }\n      o = t;\n    }\n\n    function T() {\n      v || function () {\n        var e;\n\n        if (p.shared.$video_resizer ? (v = p.shared.$video_resizer, a = p.shared.$vid_overlay, p.events.on(\"destroy\", function () {\n          c(\"body\").first().append(v.removeClass(\"fr-active\"));\n        }, !0)) : (p.shared.$video_resizer = c(document.createElement(\"div\")).attr(\"class\", \"fr-video-resizer\"), v = p.shared.$video_resizer, p.events.$on(v, \"mousedown\", function (e) {\n          e.stopPropagation();\n        }, !0), p.opts.videoResize && (v.append(L(\"nw\") + L(\"ne\") + L(\"sw\") + L(\"se\")), p.shared.$vid_overlay = c(document.createElement(\"div\")).attr(\"class\", \"fr-video-overlay\"), a = p.shared.$vid_overlay, e = v.get(0).ownerDocument, c(e).find(\"body\").first().append(a))), p.events.on(\"shared.destroy\", function () {\n          v.html(\"\").removeData().remove(), v = null, p.opts.videoResize && (a.remove(), a = null);\n        }, !0), p.helpers.isMobile() || p.events.$on(c(p.o_win), \"resize.video\", function () {\n          M(!0);\n        }), p.opts.videoResize) {\n          e = v.get(0).ownerDocument, p.events.$on(v, p._mousedown, \".fr-handler\", I), p.events.$on(c(e), p._mousemove, k), p.events.$on(c(e.defaultView || e.parentWindow), p._mouseup, O), p.events.$on(a, \"mouseleave\", O);\n          var o = 1,\n              r = null,\n              s = 0;\n          p.events.on(\"keydown\", function (e) {\n            if (u) {\n              var t = -1 != navigator.userAgent.indexOf(\"Mac OS X\") ? e.metaKey : e.ctrlKey,\n                  i = e.which;\n              (i !== r || 200 < e.timeStamp - s) && (o = 1), (i == Q.KEYCODE.EQUALS || p.browser.mozilla && i == Q.KEYCODE.FF_EQUALS) && t && !e.altKey ? o = P.call(this, e, 1, 1, o) : (i == Q.KEYCODE.HYPHEN || p.browser.mozilla && i == Q.KEYCODE.FF_HYPHEN) && t && !e.altKey && (o = P.call(this, e, 2, -1, o)), r = i, s = e.timeStamp;\n            }\n          }), p.events.on(\"keyup\", function () {\n            o = 1;\n          });\n        }\n      }(), (p.$wp || p.$sc).append(v), v.data(\"instance\", p);\n      var e = u.find(\"iframe, embed, video\"),\n          t = 0,\n          i = 0;\n      p.opts.iframe && (i = p.helpers.getPX(p.$wp.find(\".fr-iframe\").css(\"padding-top\")), t = p.helpers.getPX(p.$wp.find(\".fr-iframe\").css(\"padding-left\"))), v.css(\"top\", (p.opts.iframe ? e.offset().top + i - 1 : e.offset().top - p.$wp.offset().top - 1) + p.$wp.scrollTop()).css(\"left\", (p.opts.iframe ? e.offset().left + t - 1 : e.offset().left - p.$wp.offset().left - 1) + p.$wp.scrollLeft()).css(\"width\", e.get(0).getBoundingClientRect().width).css(\"height\", e.get(0).getBoundingClientRect().height).addClass(\"fr-active\");\n    }\n\n    function t(e) {\n      if (e && \"touchend\" == e.type && i) return !0;\n      if (e && p.edit.isDisabled()) return e.stopPropagation(), e.preventDefault(), !1;\n      if (p.edit.isDisabled()) return !1;\n\n      for (var t = 0; t < Q.INSTANCES.length; t++) {\n        Q.INSTANCES[t] != p && Q.INSTANCES[t].events.trigger(\"video.hideResizer\");\n      }\n\n      p.toolbar.disable(), p.helpers.isMobile() && (p.events.disableBlur(), p.$el.blur(), p.events.enableBlur()), p.$el.find(\".fr-video.fr-active\").removeClass(\"fr-active\"), (u = c(this)).addClass(\"fr-active\"), p.opts.iframe && p.size.syncIframe(), J(), T(), s(), p.selection.clear(), p.button.bulkRefresh(), p.events.trigger(\"image.hideResizer\");\n    }\n\n    function M(e) {\n      u && (p.shared.vid_exit_flag || !0 === e) && (v.removeClass(\"fr-active\"), p.toolbar.enable(), u.removeClass(\"fr-active\"), u = null, V());\n    }\n\n    function e() {\n      p.shared.vid_exit_flag = !0;\n    }\n\n    function V() {\n      p.shared.vid_exit_flag = !1;\n    }\n\n    function Y(e) {\n      var t = e.originalEvent.dataTransfer;\n\n      if (t && t.files && t.files.length) {\n        var i = t.files[0];\n\n        if (i && i.type && -1 !== i.type.indexOf(\"video\")) {\n          if (!p.opts.videoUpload) return e.preventDefault(), e.stopPropagation(), !1;\n          p.markers.remove(), p.markers.insertAtPoint(e.originalEvent), p.$el.find(\".fr-marker\").replaceWith(Q.MARKERS), p.popups.hideAll();\n          var o = p.popups.get(\"video.insert\");\n          return o || (o = n()), p.popups.setContainer(\"video.insert\", p.$sc), p.popups.show(\"video.insert\", e.originalEvent.pageX, e.originalEvent.pageY), _(), 0 <= p.opts.videoAllowedTypes.indexOf(i.type.replace(/video\\//g, \"\")) ? N(t.files) : K(b), e.preventDefault(), e.stopPropagation(), !1;\n        }\n      }\n    }\n\n    function N(e) {\n      if (void 0 !== e && 0 < e.length) {\n        if (!1 === p.events.trigger(\"video.beforeUpload\", [e])) return !1;\n        var t,\n            i = e[0];\n        if ((null === p.opts.videoUploadURL || p.opts.videoUploadURL == d) && !p.opts.videoUploadToS3) return function (o) {\n          u && u.find(\"iframe\") && u.find(\"iframe\").length && W();\n          var r = new FileReader();\n          r.onload = function () {\n            r.result;\n\n            for (var e = atob(r.result.split(\",\")[1]), t = [], i = 0; i < e.length; i++) {\n              t.push(e.charCodeAt(i));\n            }\n\n            C(window.URL.createObjectURL(new Blob([new Uint8Array(t)], {\n              type: o.type\n            })), !1, null, u);\n          }, _(), r.readAsDataURL(o);\n        }(i), !1;\n        if (i.size > p.opts.videoMaxSize) return K(m), !1;\n        if (p.opts.videoAllowedTypes.indexOf(i.type.replace(/video\\//g, \"\")) < 0) return K(b), !1;\n\n        if (p.drag_support.formdata && (t = p.drag_support.formdata ? new FormData() : null), t) {\n          var o;\n          if (!1 !== p.opts.videoUploadToS3) for (o in t.append(\"key\", p.opts.videoUploadToS3.keyStart + new Date().getTime() + \"-\" + (i.name || \"untitled\")), t.append(\"success_action_status\", \"201\"), t.append(\"X-Requested-With\", \"xhr\"), t.append(\"Content-Type\", i.type), p.opts.videoUploadToS3.params) {\n            p.opts.videoUploadToS3.params.hasOwnProperty(o) && t.append(o, p.opts.videoUploadToS3.params[o]);\n          }\n\n          for (o in p.opts.videoUploadParams) {\n            p.opts.videoUploadParams.hasOwnProperty(o) && t.append(o, p.opts.videoUploadParams[o]);\n          }\n\n          t.append(p.opts.videoUploadParam, i);\n          var r = p.opts.videoUploadURL;\n          p.opts.videoUploadToS3 && (r = p.opts.videoUploadToS3.uploadURL ? p.opts.videoUploadToS3.uploadURL : \"https://\" + p.opts.videoUploadToS3.region + \".amazonaws.com/\" + p.opts.videoUploadToS3.bucket);\n          var s = p.core.getXHR(r, p.opts.videoUploadMethod);\n          s.onload = function () {\n            D.call(s, u);\n          }, s.onerror = U, s.upload.onprogress = B, s.onabort = $, _(), p.events.disableBlur(), p.edit.off(), p.events.enableBlur();\n          var n = p.popups.get(\"video.insert\");\n          n && c(n.off(\"abortUpload\")).on(\"abortUpload\", function () {\n            4 != s.readyState && s.abort();\n          }), s.send(t);\n        }\n      }\n    }\n\n    function K(e, t) {\n      p.edit.on(), u && u.find(\"video\").addClass(\"fr-error\"), R(p.language.translate(\"Something went wrong. Please try again.\")), p.events.trigger(\"video.error\", [{\n        code: e,\n        message: r[e]\n      }, t]);\n    }\n\n    function X() {\n      if (u) {\n        var e = p.popups.get(\"video.size\"),\n            t = u.find(\"iframe, embed, video\");\n        e.find('input[name=\"width\"]').val(t.get(0).style.width || t.attr(\"width\")).trigger(\"change\"), e.find('input[name=\"height\"]').val(t.get(0).style.height || t.attr(\"height\")).trigger(\"change\");\n      }\n    }\n\n    function H(e) {\n      if (e) return p.popups.onRefresh(\"video.size\", X), !0;\n      var t = {\n        buttons: '<div class=\"fr-buttons fr-tabs\">' + p.button.buildList(p.opts.videoSizeButtons) + \"</div>\",\n        size_layer: '<div class=\"fr-video-size-layer fr-layer fr-active\" id=\"fr-video-size-layer-' + p.id + '\"><div class=\"fr-video-group\"><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-width-' + p.id + '\" type=\"text\" name=\"width\" placeholder=\"' + p.language.translate(\"Width\") + '\" tabIndex=\"1\"></div><div class=\"fr-input-line\"><input id=\"fr-video-size-layer-height-' + p.id + '\" type=\"text\" name=\"height\" placeholder=\"' + p.language.translate(\"Height\") + '\" tabIndex=\"1\"></div></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"videoSetSize\" tabIndex=\"2\" role=\"button\">' + p.language.translate(\"Update\") + \"</button></div></div>\"\n      },\n          i = p.popups.create(\"video.size\", t);\n      return p.events.$on(p.$wp, \"scroll\", function () {\n        u && p.popups.isVisible(\"video.size\") && (p.events.disableBlur(), x(u));\n      }), i;\n    }\n\n    function G(e) {\n      if (void 0 === e && (e = u), e) {\n        if (e.hasClass(\"fr-fvl\")) return \"left\";\n        if (e.hasClass(\"fr-fvr\")) return \"right\";\n        if (e.hasClass(\"fr-dvb\") || e.hasClass(\"fr-dvi\")) return \"center\";\n\n        if (\"block\" == e.css(\"display\")) {\n          if (\"left\" == e.css(\"text-algin\")) return \"left\";\n          if (\"right\" == e.css(\"text-align\")) return \"right\";\n        } else {\n          if (\"left\" == e.css(\"float\")) return \"left\";\n          if (\"right\" == e.css(\"float\")) return \"right\";\n        }\n      }\n\n      return \"center\";\n    }\n\n    function F(e) {\n      void 0 === e && (e = u);\n      var t = e.css(\"float\");\n      return e.css(\"float\", \"none\"), \"block\" == e.css(\"display\") ? (e.css(\"float\", \"\"), e.css(\"float\") != t && e.css(\"float\", t), \"block\") : (e.css(\"float\", \"\"), e.css(\"float\") != t && e.css(\"float\", t), \"inline\");\n    }\n\n    function W() {\n      if (u && !1 !== p.events.trigger(\"video.beforeRemove\", [u])) {\n        var e = u;\n        p.popups.hideAll(), M(!0), p.selection.setBefore(e.get(0)) || p.selection.setAfter(e.get(0)), e.remove(), p.selection.restore(), p.html.fillEmptyBlocks();\n      }\n    }\n\n    function j() {\n      S();\n    }\n\n    function q(e, t, i) {\n      !p.opts.htmlUntouched && p.opts.useClasses ? (e.removeClass(\"fr-fvl fr-fvr fr-dvb fr-dvi\"), e.addClass(\"fr-fv\" + i[0] + \" fr-dv\" + t[0])) : \"inline\" == t ? (e.css({\n        display: \"inline-block\"\n      }), \"center\" == i ? e.css({\n        \"float\": \"none\"\n      }) : \"left\" == i ? e.css({\n        \"float\": \"left\"\n      }) : e.css({\n        \"float\": \"right\"\n      })) : (e.css({\n        display: \"block\",\n        clear: \"both\"\n      }), \"left\" == i ? e.css({\n        textAlign: \"left\"\n      }) : \"right\" == i ? e.css({\n        textAlign: \"right\"\n      }) : e.css({\n        textAlign: \"center\"\n      }));\n    }\n\n    function Z() {\n      var e = p.$el.find(\"video\").filter(function () {\n        return 0 === c(this).parents(\"span.fr-video\").length;\n      });\n\n      if (0 != e.length) {\n        e.wrap(c(document.createElement(\"span\")).attr(\"class\", \"fr-video\").attr(\"contenteditable\", \"false\")), p.$el.find(\"embed, iframe\").filter(function () {\n          if (p.browser.safari && this.getAttribute(\"src\") && this.setAttribute(\"src\", this.src), 0 < c(this).parents(\"span.fr-video\").length) return !1;\n\n          for (var e = c(this).attr(\"src\"), t = 0; t < Q.VIDEO_PROVIDERS.length; t++) {\n            var i = Q.VIDEO_PROVIDERS[t];\n            if (i.test_regex.test(e) && new RegExp(p.opts.videoAllowedProviders.join(\"|\")).test(i.provider)) return !0;\n          }\n\n          return !1;\n        }).map(function () {\n          return 0 === c(this).parents(\"object\").length ? this : c(this).parents(\"object\").get(0);\n        }).wrap(c(document.createElement(\"span\")).attr(\"class\", \"fr-video\").attr(\"contenteditable\", \"false\"));\n\n        for (var t, i, o = p.$el.find(\"span.fr-video, video\"), r = 0; r < o.length; r++) {\n          var s = c(o[r]);\n          !p.opts.htmlUntouched && p.opts.useClasses ? ((i = s).hasClass(\"fr-dvi\") || i.hasClass(\"fr-dvb\") || (i.addClass(\"fr-fv\" + G(i)[0]), i.addClass(\"fr-dv\" + F(i)[0])), p.opts.videoTextNear || s.removeClass(\"fr-dvi\").addClass(\"fr-dvb\")) : p.opts.htmlUntouched || p.opts.useClasses || (q(t = s, t.hasClass(\"fr-dvb\") ? \"block\" : t.hasClass(\"fr-dvi\") ? \"inline\" : null, t.hasClass(\"fr-fvl\") ? \"left\" : t.hasClass(\"fr-fvr\") ? \"right\" : G(t)), t.removeClass(\"fr-dvb fr-dvi fr-fvr fr-fvl\"));\n        }\n\n        o.toggleClass(\"fr-draggable\", p.opts.videoMove);\n      }\n    }\n\n    function J() {\n      if (u) {\n        p.selection.clear();\n        var e = p.doc.createRange();\n        e.selectNode(u.get(0)), p.selection.get().addRange(e);\n      }\n    }\n\n    return r[1] = \"Video cannot be loaded from the passed link.\", r[l] = \"No link in upload response.\", r[h] = \"Error during file upload.\", r[g] = \"Parsing response failed.\", r[m] = \"File is too large.\", r[b] = \"Video file type is invalid.\", r[7] = \"Files can be uploaded only to same domain in IE 8 and IE 9.\", p.shared.vid_exit_flag = !1, {\n      _init: function _init() {\n        p.opts.videoResponsive && (p.opts.videoResize = !1), p.events.on(\"drop\", Y, !0), p.events.on(\"mousedown window.mousedown\", e), p.events.on(\"window.touchmove\", V), p.events.on(\"mouseup window.mouseup\", M), p.events.on(\"commands.mousedown\", function (e) {\n          0 < e.parents(\".fr-toolbar\").length && M();\n        }), p.events.on(\"video.hideResizer commands.undo commands.redo element.dropped\", function () {\n          M(!0);\n        }), p.helpers.isMobile() && (p.events.$on(p.$el, \"touchstart\", \"span.fr-video\", function () {\n          i = !1;\n        }), p.events.$on(p.$el, \"touchmove\", function () {\n          i = !0;\n        })), p.events.on(\"html.set\", Z), Z(), p.events.$on(p.$el, \"mousedown\", \"span.fr-video\", function (e) {\n          e.stopPropagation(), (p.browser.msie || p.browser.edge) && (e.target.dragDrop(), t.call(this, e));\n        }), p.events.$on(p.$el, \"click touchend\", \"span.fr-video\", function (e) {\n          if (\"false\" == c(this).parents(\"[contenteditable]\").not(\".fr-element\").not(\".fr-img-caption\").not(\"body\").first().attr(\"contenteditable\")) return !0;\n          t.call(this, e);\n        }), p.events.on(\"keydown\", function (e) {\n          var t = e.which;\n          return !u || t != Q.KEYCODE.BACKSPACE && t != Q.KEYCODE.DELETE ? u && t == Q.KEYCODE.ESC ? (M(!0), e.preventDefault(), !1) : u && t != Q.KEYCODE.F10 && !p.keys.isBrowserAction(e) ? (e.preventDefault(), !1) : void 0 : (e.preventDefault(), W(), p.undo.saveStep(), !1);\n        }, !0), p.events.on(\"toolbar.esc\", function () {\n          if (u) return p.events.disableBlur(), p.events.focus(), !1;\n        }, !0), p.events.on(\"toolbar.focusEditor\", function () {\n          if (u) return !1;\n        }, !0), p.events.on(\"keydown\", function () {\n          p.$el.find(\"span.fr-video:empty\").remove();\n        }), p.$wp && (z(), p.events.on(\"contentChanged\", z)), n(!0), H(!0);\n      },\n      showInsertPopup: function showInsertPopup() {\n        var e = p.$tb.find('.fr-command[data-cmd=\"insertVideo\"]'),\n            t = p.popups.get(\"video.insert\");\n        if (t || (t = n()), S(), !t.hasClass(\"fr-active\")) if (p.popups.refresh(\"video.insert\"), p.popups.setContainer(\"video.insert\", p.$tb), e.isVisible()) {\n          var i = p.button.getPosition(e),\n              o = i.left,\n              r = i.top;\n          p.popups.show(\"video.insert\", o, r, e.outerHeight());\n        } else p.position.forSelection(t), p.popups.show(\"video.insert\");\n      },\n      showLayer: function showLayer(e) {\n        var t,\n            i,\n            o = p.popups.get(\"video.insert\");\n\n        if (!u && !p.opts.toolbarInline) {\n          var r = p.$tb.find('.fr-command[data-cmd=\"insertVideo\"]');\n          t = r.offset().left, i = r.offset().top + (p.opts.toolbarBottom ? 10 : r.outerHeight() - 10);\n        }\n\n        p.opts.toolbarInline && (i = o.offset().top - p.helpers.getPX(o.css(\"margin-top\")), o.hasClass(\"fr-above\") && (i += o.outerHeight())), o.find(\".fr-layer\").removeClass(\"fr-active\"), o.find(\".fr-\" + e + \"-layer\").addClass(\"fr-active\"), p.popups.show(\"video.insert\", t, i, 0), p.accessibility.focusPopup(o);\n      },\n      refreshByURLButton: function refreshByURLButton(e) {\n        var t = p.popups.get(\"video.insert\");\n        t && t.find(\".fr-video-by-url-layer\").hasClass(\"fr-active\") && e.addClass(\"fr-active\").attr(\"aria-pressed\", !0);\n      },\n      refreshEmbedButton: function refreshEmbedButton(e) {\n        var t = p.popups.get(\"video.insert\");\n        t && t.find(\".fr-video-embed-layer\").hasClass(\"fr-active\") && e.addClass(\"fr-active\").attr(\"aria-pressed\", !0);\n      },\n      refreshUploadButton: function refreshUploadButton(e) {\n        var t = p.popups.get(\"video.insert\");\n        t && t.find(\".fr-video-upload-layer\").hasClass(\"fr-active\") && e.addClass(\"fr-active\").attr(\"aria-pressed\", !0);\n      },\n      upload: N,\n      insertByURL: function insertByURL(e) {\n        void 0 === e && (e = (p.popups.get(\"video.insert\").find('.fr-video-by-url-layer input[type=\"text\"]').val() || \"\").trim());\n        var t = null;\n        if (/^http/.test(e) || (e = \"https://\" + e), p.helpers.isURL(e)) for (var i = 0; i < Q.VIDEO_PROVIDERS.length; i++) {\n          var o = Q.VIDEO_PROVIDERS[i];\n\n          if (o.test_regex.test(e) && new RegExp(p.opts.videoAllowedProviders.join(\"|\")).test(o.provider)) {\n            t = e.replace(o.url_regex, o.url_text), t = o.html.replace(/\\{url\\}/, t);\n            break;\n          }\n        }\n        t ? w(t) : (R(p.language.translate(\"Something went wrong. Please try again.\")), p.events.trigger(\"video.linkError\", [e]));\n      },\n      insertEmbed: function insertEmbed(e) {\n        void 0 === e && (e = p.popups.get(\"video.insert\").find(\".fr-video-embed-layer textarea\").val() || \"\"), 0 !== e.length && Q.VIDEO_EMBED_REGEX.test(e) ? w(e) : (R(p.language.translate(\"Something went wrong. Please try again.\")), p.events.trigger(\"video.codeError\", [e]));\n      },\n      insert: w,\n      align: function align(e) {\n        u.removeClass(\"fr-fvr fr-fvl\"), !p.opts.htmlUntouched && p.opts.useClasses ? \"left\" == e ? u.addClass(\"fr-fvl\") : \"right\" == e && u.addClass(\"fr-fvr\") : q(u, F(), e), J(), T(), s(), p.selection.clear();\n      },\n      refreshAlign: function refreshAlign(e) {\n        if (!u) return !1;\n        e.find(\">*\").first().replaceWith(p.icon.create(\"video-align-\" + G()));\n      },\n      refreshAlignOnShow: function refreshAlignOnShow(e, t) {\n        u && t.find('.fr-command[data-param1=\"' + G() + '\"]').addClass(\"fr-active\").attr(\"aria-selected\", !0);\n      },\n      display: function display(e) {\n        u.removeClass(\"fr-dvi fr-dvb\"), !p.opts.htmlUntouched && p.opts.useClasses ? \"inline\" == e ? u.addClass(\"fr-dvi\") : \"block\" == e && u.addClass(\"fr-dvb\") : q(u, e, G()), J(), T(), s(), p.selection.clear();\n      },\n      refreshDisplayOnShow: function refreshDisplayOnShow(e, t) {\n        u && t.find('.fr-command[data-param1=\"' + F() + '\"]').addClass(\"fr-active\").attr(\"aria-selected\", !0);\n      },\n      remove: W,\n      hideProgressBar: S,\n      showSizePopup: function showSizePopup() {\n        var e = p.popups.get(\"video.size\");\n        e || (e = H()), S(), p.popups.refresh(\"video.size\"), p.popups.setContainer(\"video.size\", p.$sc);\n        var t = u.find(\"iframe, embed, video\"),\n            i = t.offset().left + t.outerWidth() / 2,\n            o = t.offset().top + t.height();\n        p.popups.show(\"video.size\", i, o, t.height(), !0);\n      },\n      replace: function replace() {\n        var e = p.popups.get(\"video.insert\");\n        e || (e = n()), p.popups.isVisible(\"video.insert\") || (S(), p.popups.refresh(\"video.insert\"), p.popups.setContainer(\"video.insert\", p.$sc));\n        var t = u.offset().left + u.outerWidth() / 2,\n            i = u.offset().top + u.height();\n        p.popups.show(\"video.insert\", t, i, u.outerHeight(), !0);\n      },\n      back: function back() {\n        u ? (p.events.disableBlur(), u[0].click()) : (p.events.disableBlur(), p.selection.restore(), p.events.enableBlur(), p.popups.hide(\"video.insert\"), p.toolbar.showInline());\n      },\n      setSize: function setSize(e, t) {\n        if (u) {\n          var i = p.popups.get(\"video.size\"),\n              o = u.find(\"iframe, embed, video\");\n          o.css(\"width\", e || i.find('input[name=\"width\"]').val()), o.css(\"height\", t || i.find('input[name=\"height\"]').val()), o.get(0).style.width && o.removeAttr(\"width\"), o.get(0).style.height && o.removeAttr(\"height\"), i.find(\"input:focus\").blur(), setTimeout(function () {\n            u.trigger(\"click\");\n          }, p.helpers.isAndroid() ? 50 : 0);\n        }\n      },\n      get: function get() {\n        return u;\n      },\n      showProgressBar: _\n    };\n  }, Q.RegisterCommand(\"insertVideo\", {\n    title: \"Insert Video\",\n    undo: !1,\n    focus: !0,\n    refreshAfterCallback: !1,\n    popup: !0,\n    callback: function callback() {\n      this.popups.isVisible(\"video.insert\") ? (this.$el.find(\".fr-marker\").length && (this.events.disableBlur(), this.selection.restore()), this.popups.hide(\"video.insert\")) : this.video.showInsertPopup();\n    },\n    plugin: \"video\"\n  }), Q.DefineIcon(\"insertVideo\", {\n    NAME: \"video-camera\",\n    FA5NAME: \"camera\",\n    SVG_KEY: \"insertVideo\"\n  }), Q.DefineIcon(\"videoByURL\", {\n    NAME: \"link\",\n    SVG_KEY: \"insertLink\"\n  }), Q.RegisterCommand(\"videoByURL\", {\n    title: \"By URL\",\n    undo: !1,\n    focus: !1,\n    toggle: !0,\n    callback: function callback() {\n      this.video.showLayer(\"video-by-url\");\n    },\n    refresh: function refresh(e) {\n      this.video.refreshByURLButton(e);\n    }\n  }), Q.DefineIcon(\"videoEmbed\", {\n    NAME: \"code\",\n    SVG_KEY: \"codeView\"\n  }), Q.RegisterCommand(\"videoEmbed\", {\n    title: \"Embedded Code\",\n    undo: !1,\n    focus: !1,\n    toggle: !0,\n    callback: function callback() {\n      this.video.showLayer(\"video-embed\");\n    },\n    refresh: function refresh(e) {\n      this.video.refreshEmbedButton(e);\n    }\n  }), Q.DefineIcon(\"videoUpload\", {\n    NAME: \"upload\",\n    SVG_KEY: \"upload\"\n  }), Q.RegisterCommand(\"videoUpload\", {\n    title: \"Upload Video\",\n    undo: !1,\n    focus: !1,\n    toggle: !0,\n    callback: function callback() {\n      this.video.showLayer(\"video-upload\");\n    },\n    refresh: function refresh(e) {\n      this.video.refreshUploadButton(e);\n    }\n  }), Q.RegisterCommand(\"videoInsertByURL\", {\n    undo: !0,\n    focus: !0,\n    callback: function callback() {\n      this.video.insertByURL();\n    }\n  }), Q.RegisterCommand(\"videoInsertEmbed\", {\n    undo: !0,\n    focus: !0,\n    callback: function callback() {\n      this.video.insertEmbed();\n    }\n  }), Q.DefineIcon(\"videoDisplay\", {\n    NAME: \"star\",\n    SVG_KEY: \"star\"\n  }), Q.RegisterCommand(\"videoDisplay\", {\n    title: \"Display\",\n    type: \"dropdown\",\n    options: {\n      inline: \"Inline\",\n      block: \"Break Text\"\n    },\n    callback: function callback(e, t) {\n      this.video.display(t);\n    },\n    refresh: function refresh(e) {\n      this.opts.videoTextNear || e.addClass(\"fr-hidden\");\n    },\n    refreshOnShow: function refreshOnShow(e, t) {\n      this.video.refreshDisplayOnShow(e, t);\n    }\n  }), Q.DefineIcon(\"video-align\", {\n    NAME: \"align-left\",\n    SVG_KEY: \"align Left\"\n  }), Q.DefineIcon(\"video-align-left\", {\n    NAME: \"align-left\",\n    SVG_KEY: \"alignLeft\"\n  }), Q.DefineIcon(\"video-align-right\", {\n    NAME: \"align-right\",\n    SVG_KEY: \"alignRight\"\n  }), Q.DefineIcon(\"video-align-center\", {\n    NAME: \"align-justify\",\n    SVG_KEY: \"alignJustify\"\n  }), Q.DefineIcon(\"videoAlign\", {\n    NAME: \"align-center\",\n    SVG_KEY: \"alignCenter\"\n  }), Q.RegisterCommand(\"videoAlign\", {\n    type: \"dropdown\",\n    title: \"Align\",\n    options: {\n      left: \"Align Left\",\n      center: \"None\",\n      right: \"Align Right\"\n    },\n    html: function html() {\n      var e = '<ul class=\"fr-dropdown-list\" role=\"presentation\">',\n          t = Q.COMMANDS.videoAlign.options;\n\n      for (var i in t) {\n        t.hasOwnProperty(i) && (e += '<li role=\"presentation\"><a class=\"fr-command fr-title\" tabIndex=\"-1\" role=\"option\" data-cmd=\"videoAlign\" data-param1=\"' + i + '\" title=\"' + this.language.translate(t[i]) + '\">' + this.icon.create(\"video-align-\" + i) + '<span class=\"fr-sr-only\">' + this.language.translate(t[i]) + \"</span></a></li>\");\n      }\n\n      return e += \"</ul>\";\n    },\n    callback: function callback(e, t) {\n      this.video.align(t);\n    },\n    refresh: function refresh(e) {\n      this.video.refreshAlign(e);\n    },\n    refreshOnShow: function refreshOnShow(e, t) {\n      this.video.refreshAlignOnShow(e, t);\n    }\n  }), Q.DefineIcon(\"videoReplace\", {\n    NAME: \"exchange\",\n    FA5NAME: \"exchange-alt\",\n    SVG_KEY: \"replaceImage\"\n  }), Q.RegisterCommand(\"videoReplace\", {\n    title: \"Replace\",\n    undo: !1,\n    focus: !1,\n    popup: !0,\n    refreshAfterCallback: !1,\n    callback: function callback() {\n      this.video.replace();\n    }\n  }), Q.DefineIcon(\"videoRemove\", {\n    NAME: \"trash\",\n    SVG_KEY: \"remove\"\n  }), Q.RegisterCommand(\"videoRemove\", {\n    title: \"Remove\",\n    callback: function callback() {\n      this.video.remove();\n    }\n  }), Q.DefineIcon(\"videoSize\", {\n    NAME: \"arrows-alt\",\n    SVG_KEY: \"imageSize\"\n  }), Q.RegisterCommand(\"videoSize\", {\n    undo: !1,\n    focus: !1,\n    popup: !0,\n    title: \"Change Size\",\n    callback: function callback() {\n      this.video.showSizePopup();\n    }\n  }), Q.DefineIcon(\"videoBack\", {\n    NAME: \"arrow-left\",\n    SVG_KEY: \"back\"\n  }), Q.RegisterCommand(\"videoBack\", {\n    title: \"Back\",\n    undo: !1,\n    focus: !1,\n    back: !0,\n    callback: function callback() {\n      this.video.back();\n    },\n    refresh: function refresh(e) {\n      this.video.get() || this.opts.toolbarInline ? (e.removeClass(\"fr-hidden\"), e.next(\".fr-separator\").removeClass(\"fr-hidden\")) : (e.addClass(\"fr-hidden\"), e.next(\".fr-separator\").addClass(\"fr-hidden\"));\n    }\n  }), Q.RegisterCommand(\"videoDismissError\", {\n    title: \"OK\",\n    undo: !1,\n    callback: function callback() {\n      this.video.hideProgressBar(!0);\n    }\n  }), Q.RegisterCommand(\"videoSetSize\", {\n    undo: !0,\n    focus: !1,\n    title: \"Update\",\n    refreshAfterCallback: !1,\n    callback: function callback() {\n      this.video.setSize();\n    }\n  });\n});","map":null,"metadata":{},"sourceType":"script"}